<section
  class="color-{{ section.settings.color_scheme }} signup-with-image-section w-full min-h-screen"
  id="section-{{ section.id }}"
  style="padding: var(--sections-spacing-top) var(--sections-side-space) var(--sections-spacing-bottom);"
>
  <div id="signup-with-image-slider" class="signup-with-image-slider">
    <!-- Image Column -->
    <div class="signup-with-image-image scroll-slide-trigger scroll-slide-from-behind-right">
      {% if section.settings.main_image or section.settings.mobile_image %}
        <picture>
          {% if section.settings.mobile_image != blank %}
            <source
              media="(max-width: 767px)"
              srcset="
                {% if section.settings.mobile_image.width >= 375 %}{{ section.settings.mobile_image | image_url: width: 375 }} 375w,{% endif %}
                {% if section.settings.mobile_image.width >= 550 %}{{ section.settings.mobile_image | image_url: width: 550 }} 550w,{% endif %}
                {% if section.settings.mobile_image.width >= 768 %}{{ section.settings.mobile_image | image_url: width: 768 }} 768w,{% endif %}
                {{ section.settings.mobile_image | image_url }} {{ section.settings.mobile_image.width }}w
              "
              sizes="100vw"
            >
          {% endif %}

          {% assign desktop_image = section.settings.main_image | default: section.settings.mobile_image %}
          <img
            srcset="
              {% if desktop_image.width >= 375 %}{{ desktop_image | image_url: width: 375 }} 375w,{% endif %}
              {% if desktop_image.width >= 768 %}{{ desktop_image | image_url: width: 768 }} 768w,{% endif %}
              {% if desktop_image.width >= 1000 %}{{ desktop_image | image_url: width: 1000 }} 1000w,{% endif %}
              {% if desktop_image.width >= 1500 %}{{ desktop_image | image_url: width: 1500 }} 1500w,{% endif %}
              {{ desktop_image | image_url }} {{ desktop_image.width }}w
            "
            sizes="(max-width: 767px) 100vw, 50vw"
            src="{{ desktop_image | image_url: width: 1000 }}"
            alt="{{ desktop_image.alt | escape | default: 'Signup with image' }}"
            width="{{ desktop_image.width }}"
            height="{{ desktop_image.height }}"
            loading="lazy"
            decoding="async"
            style="width: 100%; height: 100%; object-fit: cover; border-radius: 0; display: block; margin: 0 auto;"
          >
        </picture>
      {% else %}
        <div style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%;">
          {{ 'collection-1' | placeholder_svg_tag: 'w-full h-[60vh] object-contain mx-auto' }}
        </div>
      {% endif %}
    </div>
    <!-- Form Column -->
    <div class="signup-with-image-form-container">
      {% if section.settings.form_bg_overlay and section.settings.form_bg_image %}
        <div
          class="signup-with-image-overlay"
          style="opacity: {{ section.settings.form_bg_overlay_opacity | divided_by: 100.0 }};"
        ></div>
      {% endif %}
      <div
        class="signup-with-image-form-box"
        style="max-width: 45rem; padding: var(--space-5xl) var(--space-3xl); display: flex; flex-direction: column; align-items: center; text-align: center;"
      >
        <div
          class="signup-with-image-subheading scroll-fade-trigger scroll-fade-up"
        >
          {{ section.settings.subheading }}
        </div>
        <h2
          class="signup-with-image-heading scroll-fade-trigger scroll-fade-up scroll-fade-delay-1"
          style="width: 490px;"
        >
          {{ section.settings.heading | newline_to_br }}
        </h2>
        <p class="signup-with-image-description scroll-fade-trigger scroll-fade-up scroll-fade-delay-2">
          {{ section.settings.description }}
        </p>
        <form
          class="signup-with-image-form scroll-fade-trigger scroll-fade-up scroll-fade-delay-3"
          method="post"
          action="/contact#contact_form"
          id="email-signup-form-password"
          style="display: flex; flex-direction: column; align-items: center; gap: 10px;"
        >
          <input type="hidden" name="form_type" value="customer">
          <input type="hidden" name="utf8" value="âœ“">
          <div
            class="form-fields-container scroll-fade-trigger scroll-fade-up scroll-fade-delay-4"
            style="width: 324px;"
          >
            <input
              type="email"
              placeholder="{{ section.settings.email_placeholder }}"
              id="email-input-password"
              name="contact[email]"
              class="signup-with-image-input"
              style="width: 324px; height: 48px; border: var(--inputs-border-width) solid var(--border); border-radius: 5px; opacity: var(--inputs-border-opacity); color:var(--button_label); padding: 0px var(--space-xl); font-size: var(--t-b-2-size); outline: none; box-sizing: border-box;"
              required
              pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"
            >
          </div>
          <div class="scroll-fade-trigger scroll-fade-up scroll-fade-delay-5">
            {% render 'secondary-button',
              button_text: section.settings.button_text,
              button_id: 'buttonText-password',
              button_classes: 'submit-btn'
            %}
          </div>
        </form>
      </div>
    </div>
  </div>

  <style>
    .submit-btn{
      width: 324px;
      height: 48px;
      font-size: var(--t-b-1-size);
      display: flex;
      justify-content: space-between;
    }
    .signup-with-image-form-container{
        z-index:1;
    }
      .signup-with-image-section ::selection {
        color: var(--accent) !important;
      }

      .signup-with-image-section {
        box-sizing: border-box;
      }

      .signup-with-image-subheading {
        font-size: var(--t-b-2-size) ;
        font-weight: var(--font-subheading-weight);
        color:var(--text);
      }

      .signup-with-image-heading {
        font-size: var(--t-h-2-size);
        line-height: 1;
        font-weight: var(--font-heading-weight);
        color:var(--text);
        width: 100%;
      }

      .signup-with-image-description {
        font-size: var(--t-b-2-size);
        line-height: 1.2;
        margin-top: 0.8rem;
        font-weight: var(--font-subheading-weight);
        color:var(--text);
      }

      .signup-with-image-form {
        width: 57%;
        margin-top: 5rem;
      }

      .signup-with-image-image,
      .signup-with-image-form-container {
        flex: 0 0 calc(50% - 10px);
        max-width: calc(50% - 10px);
        scroll-snap-align: start;
      }

      .signup-with-image-image {
        margin-right: 9px;
        width: 100%;
        height: {{ section.settings.section_height }}px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 1;
      }

      .signup-with-image-image picture {
        width: 100%;
        height: 100%;
        display: block;
      }

      .signup-with-image-form-container {
        background-color: {{ section.settings.form_bg_color }};
        {% if section.settings.form_bg_image %}
          background-image: url('{{ section.settings.form_bg_image | image_url: width: 1920 }}');
          background-position: {{ section.settings.form_bg_position }};
          background-size: {{ section.settings.form_bg_size }};
          background-repeat: {{ section.settings.form_bg_repeat }};
        {% endif %}
        margin-left: 9px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: {{ section.settings.section_height }}px;
        position: relative;
      }

      .signup-with-image-form-box {
        width: 100%;
        position: relative;
        z-index: 3;
      }

      .signup-with-image-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 2;
        pointer-events: none;
      }

      .signup-with-image-slider {
        display: flex;
        gap: 0px;
        padding: var(--space-lg) 0;
        overflow-y: hidden;
        overflow-x: auto;
        scroll-snap-type: x mandatory;
        position: relative;
      }

      .signup-with-image-slider::-webkit-scrollbar:vertical {
        display: none;
      }

      .signup-with-image-slider::-webkit-scrollbar {
        height: 6px;
        background: transparent;
        /* transform: translateY(-50%); */
      }

      .signup-with-image-slider::-webkit-scrollbar-thumb {
        background-color: var(--text);
        height: 3px;
        border: none;
        margin-top: -1px;
      }

      .signup-with-image-slider::-webkit-scrollbar-track {
        background-color: transparent;
        background-image: linear-gradient(to right, var(--text), var(--text));
        background-size: 100% 1px;
        background-repeat: no-repeat;
        background-position: center;
        border: none
      }

      .signup-with-image-slider::-webkit-scrollbar-button:single-button {
        display: none !important;
        width: 0 !important;
        height: 0 !important;
      }

      @media (max-width: 767px) {
        /* Disable all scroll animations on mobile */
        .scroll-fade-trigger,
        .scroll-slide-trigger {
          opacity: 1 !important;
          transform: none !important;
          transition: none !important;
          animation: none !important;
        }

        .scroll-fade-up,
        .scroll-fade-down,
        .scroll-fade-left,
        .scroll-fade-right,
        .scroll-slide-from-behind-right,
        .scroll-slide-from-behind-left {
          transform: none !important;
          opacity: 1 !important;
        }

        .signup-with-image-image,
        .signup-with-image-form-container {
          flex: 0 0 278px; /* Fixed width to 278px */
          max-width: 278px; /* Fixed width to 278px */
          margin-right: 0;
          margin-left: 0;
          height: {{ section.settings.section_height_mobile }}px;
        }

        .signup-with-image-image {
          margin-right: 0.7rem;
          z-index: 1;
        }

        .signup-with-image-form-container {
          /* z-index inherited from main definition (1) */
        }

        .signup-with-image-subheading {
          font-size: var(--t-b-4-size) ;
          width: 90%;
          letter-spacing: -0.02em; /* Reduced letter spacing */
          color:var(--text);
        }

        .signup-with-image-heading {
          font-size: var(--tm-h-1-size);
          width: 90%;
          letter-spacing: -0.02em; /* Reduced letter spacing */
        }

        .signup-with-image-description {
          font-size: var(--t-b-4-size);
          width: 90%;
          letter-spacing: -0.02em; /* Reduced letter spacing */
        }

        .signup-with-image-form {
          width: 92%;
          margin-top: 20px; /* Fixed top margin to 20px */
          letter-spacing: -0.02em; /* Reduced letter spacing */
        }

        .signup-with-image-form-box {
          padding: var(--space-5xl) var(--space-3xl) ; /* Left and right padding set to 20px */
        }

        .form-fields-container {
          width: 210px !important; /* Fixed width to 210px */
        }

        .signup-with-image-input {
          width: 210px !important;
          height: 40px !important;
          font-size: var(--t-b-2-size) !important;
        }

        .submit-btn{
          height: 40px;
          width: 210px;
        }
      }


      @media (max-width: 1024px) {
        .signup-with-image-heading{
          width: 95% !important;
        }
      }

      /* Responsive background image */
      @media (max-width: 767px) {
        .signup-with-image-form-container {
          {% if section.settings.form_bg_image %}
            background-image: url('{{ section.settings.form_bg_image | image_url: width: 768 }}');
          {% endif %}
        }
      }

      @media (max-width: 480px) {
        .signup-with-image-form-container {
          {% if section.settings.form_bg_image %}
            background-image: url('{{ section.settings.form_bg_image | image_url: width: 480 }}');
          {% endif %}
        }
      }
  </style>
</section>

{% schema %}
{
  "name": "Signup With Image",
  "tag": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme-1",
      "label": "Color Scheme"
    },
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "t:sections.signup-with-image.settings.main_image.label"
    },
    {
      "type": "image_picker",
      "id": "mobile_image",
      "label": "Mobile Image",
      "info": "Image shown on mobile screens (767px and below). Falls back to desktop image if not set."
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "t:sections.signup-with-image.settings.subheading.label",
      "default": "t:sections.signup-with-image.settings.subheading.default"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.signup-with-image.settings.heading.label",
      "default": "SIGN UP FOR OUR NEWSLETTER"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "t:sections.signup-with-image.settings.description.label",
      "default": "Subscribe to receive updates, access to exclusive deals, and more."
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "t:sections.signup-with-image.settings.email_placeholder.label",
      "default": "t:sections.signup-with-image.settings.email_placeholder.default"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "t:sections.signup-with-image.settings.button_text.label",
      "default": "t:sections.signup-with-image.settings.button_text.default"
    },
    {
      "type": "color",
      "id": "form_bg_color",
      "label": "t:sections.signup-with-image.settings.form_bg_color.label",
      "default": "#f2f2f2"
    },
    {
      "type": "image_picker",
      "id": "form_bg_image",
      "label": "Form Background Image"
    },
    {
      "type": "select",
      "id": "form_bg_position",
      "label": "Background Position",
      "options": [
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        },
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "right",
          "label": "Right"
        },
        {
          "value": "top left",
          "label": "Top Left"
        },
        {
          "value": "top right",
          "label": "Top Right"
        },
        {
          "value": "bottom left",
          "label": "Bottom Left"
        },
        {
          "value": "bottom right",
          "label": "Bottom Right"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "form_bg_size",
      "label": "Background Size",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        },
        {
          "value": "auto",
          "label": "Auto"
        }
      ],
      "default": "cover"
    },
    {
      "type": "select",
      "id": "form_bg_repeat",
      "label": "Background Repeat",
      "options": [
        {
          "value": "no-repeat",
          "label": "No Repeat"
        },
        {
          "value": "repeat",
          "label": "Repeat"
        },
        {
          "value": "repeat-x",
          "label": "Repeat Horizontally"
        },
        {
          "value": "repeat-y",
          "label": "Repeat Vertically"
        }
      ],
      "default": "no-repeat"
    },
    {
      "type": "checkbox",
      "id": "form_bg_overlay",
      "label": "Add Dark Overlay for Better Text Readability",
      "default": false
    },
    {
      "type": "range",
      "id": "form_bg_overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 50
    },
    {
      "type": "header",
      "content": "Section Size"
    },
    {
      "type": "range",
      "id": "section_height",
      "min": 300,
      "max": 1100,
      "step": 10,
      "unit": "px",
      "label": "Section height (desktop)",
      "default": 700
    },
    {
      "type": "range",
      "id": "section_height_mobile",
      "min": 300,
      "max": 800,
      "step": 10,
      "unit": "px",
      "label": "Section height (mobile)",
      "default": 680
    }
  ],
  "presets": [
    {
      "name": "Signup With Image"
    }
  ]
}
{% endschema %}
