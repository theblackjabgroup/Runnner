{% comment %}
  Section: Blog Subpost (Boilerplate)
  Minimal structure for showing blog posts
{% endcomment %}

<div class="blog-subpost">
  <div class="page-width">
    <div class="blog-subpost__wrapper">
      {%- assign blog = section.settings.blog -%}

      {%- if blogs[blog].articles_count > 0 -%}
        <div class="blog-subpost__grid">
          {%- for article in blogs[blog].articles limit: section.settings.post_limit -%}
            <div class="blog-subpost__item">
              {% comment %} {%- if article.image -%}
                <a href="{{ article.url }}" class="blog-subpost__image">
                  <img src="{{ article.image | img_url: '720x' }}" alt="{{ article.image.alt | escape }}">
                </a>
              {%- endif -%} {% endcomment %}

              <div class="blog-subpost__content">
                <h3 class="blog-subpost__title">
                  <a href="{{ article.url }}">{{ article.title }}</a>
                </h3>
                <p class="blog-subpost__excerpt">
                  {{ article.excerpt | strip_html | truncatewords: 20 }}
                </p>
                <a href="{{ article.url }}" class="blog-subpost__link">
                  Read more â†’
                </a>
              </div>
            </div>
          {%- endfor -%}
        </div>
      {%- else -%}
        <p>No articles found.</p>
      {%- endif -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Blog Subpost",
  "tag": "section",
  "class": "blog-subpost-section",
  "settings": [
    {
      "type": "blog",
      "id": "blog",
      "label": "Select Blog"
    },
    {
      "type": "range",
      "id": "post_limit",
      "min": 1,
      "max": 12,
      "step": 1,
      "label": "Number of posts",
      "default": 3
    }
  ],
  "presets": [
    {
      "name": "Blog Subpost"
    }
  ]
}
{% endschema %}
