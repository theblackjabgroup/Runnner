<div
  class="color-{{ section.settings.color_scheme }} px-2 flex items-center justify-between h-screen"
  style="padding: {{ section.settings.padding }}px 0; margin-bottom: {{ section.settings.margin_bottom }}px;"
  id="password-section"
>
  <div
    class="flex flex-col md:flex-row items-center justify-between gap-6 md:gap-20 max-w-[1400px] w-full mx-auto"
    id="mainContainer-password"
    role="region"
    aria-labelledby="email-signup-subheading"
  >
    <!-- Text content with fixed width to prevent affecting layout -->
    <div class="pass-container md:w-[45%] lg:ml-0 flex-shrink-0 space-y-0 text-left px-4 md:pl-20">
      <p class="pass-heading1 m-0 leading-none break-words w-full flex justify-center md:block md:justify-start whitespace-nowrap truncate">
        {{ section.settings.heading_1 }}
      </p>
      <p class="pass-heading2 m-0 leading-none break-words w-full flex justify-center md:block md:justify-start whitespace-nowrap truncate">
        {{ section.settings.heading_2 }}
      </p>
      <p
        class="pass-subheading font-light m-0 uppercase mt-6 tracking-tight leading-none break-words block justify-center md:block md:justify-start text-wrap"
        id="email-signup-subheading"
      >
        {{ section.settings.subheading }}
      </p>
    </div>

    <!-- Form Container with fixed width -->
    <div id="formContainer-password" class="w-full md:w-[80%] flex flex-col items-end lg:mr-0 px-4 md:pr-20">
      <form
        method="post"
        action="/contact#contact_form"
        id="email-signup-form-password"
        class="flex flex-col gap-6 w-full max-w-4xl"
      >
        <input type="hidden" name="form_type" value="customer">
        <input type="hidden" name="utf8" value="âœ“">
        <div class="form-fields-container relative w-full">
          <div class="flex justify-end w-full">
            <label for="email-input-password" class="sr-only">Email address</label>
            <input
              type="email"
              id="email-input-password"
              placeholder="EMAIL"
              name="contact[email]"
              class="pass-input w-full px-6 py-4 text-left border mt-4 ml-2 pt-2 pb-2 h-[55px] leading-[50px] md:pt-0 md:pb-0 focus:outline-none focus:ring-1 rounded-lg leading-none"
              aria-label="{{ section.settings.modal_placeholder }}"
            >
          </div>
        </div>
        <div class="flex justify-end w-full">
          <button
            type="submit"
            id="submitButton-password"
            class="pass-subscribe w-full px-6 py-4 font-light flex items-center justify-between cursor-pointer ml-2 mb-4 h-16 text-4xl leading-[50px] pt-2 pb-2 md:h-16 md:mb-0 md:pt-0 md:pb-0
transition-colors rounded-lg button-with-arrow focus:outline-none focus:ring-1"
            aria-label="Subscribe to our email list"
          >
            <img
              src="{{ 'arrow-down.png' | asset_url }}"
              alt="Dropdown Icon"
              width="100%"
              height="auto"
              class="rotate-arrow w-12 h-10 object-contain"
              aria-hidden="true"
            >
            <span id="buttonText-password">{{ section.settings.button_text }}</span>
            <span id="loadingSpinner-password" class="hidden">
              <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
            </span>
          </button>
        </div>
      </form>
      <div class="flex flex-col md:flex-row justify-end items-center w-[95%] mt-6">
        <span class="pass-text1 text-[20px] sm:text-[16px] mr-4 mb-2 md:mb-0 cursor-pointer">
          {{- section.settings.password_text_1 -}}
        </span>
        <button
          type="button"
          onclick="loadPasswordSection()"
          class="pass-text2 inline-flex items-center cursor-pointer text-[16px] tracking-tight md:text-[20px] px-6 py-0 rounded-md transition-colors focus:outline-none focus:ring-1"
          id="enterPasswordBtn"
          aria-label="Enter password to access the store"
        >
          <svg
            class="w-8 h-8 mr-4"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
          {{ section.settings.password_text_2 }}
        </button>
      </div>
    </div>
  </div>

  <div id="successMessage-password" class="hidden text-green-600 text-xl mt-4 text-center" aria-live="polite">
    Thanks for subscribing!
  </div>
</div>

<!-- Password Modal -->
<modal-dialog
  id="passwordModal"
  class="fixed inset-0 hidden z-50"
  role="dialog"
  aria-modal="true"
  aria-labelledby="passwordModalTitle"
>
   <div class="password-page flex flex-col items-center justify-center h-screen text-[var(--text)] bg-[var(--background)]">
    <button
      id="closeModalBtn"
      class="absolute top-4 right-4 text-6xl font-bold cursor-pointer focus:outline-none focus:ring-1"
      aria-label="Close password modal"
    >
      &times;
    </button>
    <div class="password-header flex flex-col">
      <h1 class="password-title" id="passwordModalTitle">{{ section.settings.modal_title }}</h1>
      <p class="password-subtitle">{{ section.settings.modal_subtitle }}</p>
    </div>

    {% form 'storefront_password' %}
      <div class="password-form">
        {% if form.errors %}
          <div class="password-error">
            {{ form.errors | default_errors }}
          </div>
        {% endif %}

        <input
          type="password"
          name="password"
          class="password-input text-[24px] placeholder:text-[24px]"
          placeholder="{{ section.settings.modal_placeholder }}"
          required
          {% if form.password %}
            value="{{ form.password }}"
          {% endif %}
        >

        <button type="submit" class="password-submit text-[24px] w-[30%] px-[2px] py-[4px] mt-8 border-none rounded-[6px] font-semibold uppercase cursor-pointer self-center transition-colors duration-300 ease-in-out md:px-0 md:py-0 md:mt-4 md:font-normal cursor-pointer">
          {{ section.settings.modal_button }}
        </button>
      </div>
    {% endform %}
  </div>
</modal-dialog>

<style>
   :root {
   {% assign color_scheme = section.settings.color_scheme %}
   --button: {{ color_scheme.settings.button }};
   --button_label: {{ color_scheme.settings.button_label }};
   --background: {{ color_scheme.settings.background }};
   --text: {{ color_scheme.settings.text }};
   --cr-yellow-2: #c97900;
   }

   #password-section p::selection,
   #password-section span::selection,
   #password-section input::selection {
    text-shadow: none;
    color: var(--cr-yellow-2);
    background-color: transparent;
  }

  .rotate-arrow {
      transition: transform 0.3s ease;
      transform: rotate(-10deg);
      transform-origin: center;
      background-color: var(--button);
      color: var(--button_label);
    }

    .button-with-arrow:hover .rotate-arrow {
      transform: rotate(-90deg);
    }

    #email-input-password::placeholder {
      font-weight: 200 !important;
      opacity: 0.5 !important;
    }
    #successMessage-password {
      color: var(--text);
      font-weight: bold;
      text-align: center;
      margin-top: 1.5rem;
      font-size: 2rem;
    }

    .pass-heading1 {
         font-size: 36px;
          font-weight: 510;
       }
       .pass-heading2 {
         font-size: 36px;
         font-weight: 510;
       }

    .pass-subheading {
      font-size: 64px;
    }

    .pass-subscribe {
      height: 64px; font-size: 64px;
      background-color: var(--button);
      color: var(--button_label);
    }

    .pass-input {
      height: 64px; font-size: 64px; 
    }

    .pass-text2 {
      background-color: var(--button);
      color: var(--button_label);
    }


    /* Make sure text container doesn't grow beyond allocated space */
    @media (min-width: 768px) {
      #mainContainer-password {
        align-items: flex-start;
      }
    }

    .password-page {
    font-family: {{ section.settings.custom_font.family }}, {{ section.settings.custom_font.fallback_families }};
    margin-top: {{ section.settings.page_margin_top }}px;
    margin-bottom: {{ section.settings.page_margin_bottom }}px;
  }

  .password-header {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .password-title {
    font-size: 4.5rem;
    font-weight: 500;
    color: var(--text);
  }

  .password-subtitle {
    font-size: 1.5rem;
    font-weight: 400;
    margin: 0;
    margin-top: -1.5rem;
    color: var(--text);
  }

  .password-form {
    width: 60rem;
    margin-top: 1rem;
    display: flex;
    flex-direction: column;
  }

  .password-input {
    width: 100%;
    padding: 4px;
    border: 1px solid var(--text);
    border-radius: 6px;
    letter-spacing: 0.5px;
    box-sizing: border-box;
    color: var(--text);
  }

  .password-input::placeholder { 
    color: var(--text);
    opacity: 0.7; 
  }

  .password-submit {
    font-weight: 600;
    border-radius: 6px;
    background-color: var(--button);
    color: var(--button_label);
  }
  #closeModalBtn {
      font-size: 2.5rem;
      color: var(--text);
    }

    @media (max-width: 768px) {
       .pass-heading1 {
         font-weight: 500;
       }
       .pass-heading2 {
         font-weight: 500;
         padding-bottom: 12px;
       }
     .pass-input {
       font-size: 40px;
     }
       .pass-input::placeholder {
         font-size: 40px;
     }
      .pass-subheading{
         font-size: 40px;
       }

      .pass-container {
        text-align: center;
      }
       .pass-subscribe {
         font-size: 40px;
       }
       #enterPasswordBtn {
         letter-spacing: 1px;
       }

    .password-page {
      width: 95vw;
      max-width: 400px;
      min-width: unset;
      margin: 40px auto;
      border-radius: 12px;
    }
    .password-title {
      font-size: 24px;
      font-weight: 400;
      margin-bottom: 2rem;
    }
    .password-subtitle {
      font-size: 20px;
      line-height: 1.2;
      font-weight: 400;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }
    .password-form {
      width: 61rem;
      min-width: unset;
      max-width: 100%;
      margin-top: 0.5rem;
      gap: 0.75rem;
    }
    .password-input {
      font-size: 20px;
      width: 54%;
      padding: 0.3rem 0.5rem;
      border-radius: 6px;
      margin-bottom: 0.8rem;
    }
      .password-input::placeholder {
        font-size: 20px;
        width: 100%;
      }
    .password-submit {
      font-size: 24px;
      font-weight: 400;
      border-radius: 6px
    }
  }
</style>

<script src="{{ 'email-signup.js' | asset_url }}" defer="defer"></script>

{% schema %}
{
  "name": "t:sections.password_page.name",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme-1",
      "label": "Color Scheme"
    },
    {
      "type": "text",
      "id": "heading_1",
      "label": "t:sections.password_page.settings.heading_1",
      "default": "GOOD THINGS"
    },
    {
      "type": "text",
      "id": "heading_2",
      "label": "t:sections.password_page.settings.heading_2",
      "default": "TAKE TIME"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "t:sections.password_page.settings.subheading",
      "default": "Opening soon"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "t:sections.password_page.settings.button_text",
      "default": "SUBSCRIBE"
    },
    {
      "type": "text",
      "id": "password_text_1",
      "label": "t:sections.password_page.settings.password_text_1",
      "default": "Got a password?"
    },
    {
      "type": "text",
      "id": "password_text_2",
      "label": "t:sections.password_page.settings.password_text_2",
      "default": "ENTER PASSWORD"
    },
    {
      "type": "text",
      "id": "modal_title",
      "label": "t:sections.password_page.settings.modal_title",
      "default": "ENTER YOUR PASSWORD"
    },
    {
      "type": "text",
      "id": "modal_subtitle",
      "label": "t:sections.password_page.settings.modal_subtitle",
      "default": "THIS STORE REQUIRES A PASSWORD TO ENTER."
    },
    {
      "type": "text",
      "id": "modal_placeholder",
      "label": "t:sections.password_page.settings.modal_placeholder",
      "default": "PASSWORD"
    },
    {
      "type": "text",
      "id": "modal_button",
      "label": "t:sections.password_page.settings.modal_button",
      "default": "Submit"
    },
    {
      "type": "range",
      "id": "padding",
      "label": "t:sections.password_page.settings.padding",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 32
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "t:sections.password_page.settings.margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 0
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Heading",
      "settings": [
        {
          "type": "text",
          "id": "heading-1",
          "label": "t:sections.password_page.blocks.heading.settings.heading-1.label",
          "default": "Good things take time."
        }
      ]
    },
    {
      "type": "text",
      "name": "Text",
      "settings": [
        {
          "type": "text",
          "id": "subheading-1",
          "label": "t:sections.password_page.blocks.text.settings.subheading-1.label",
          "default": "Opening Soon"
        }
      ]
    },
    {
      "type": "email_form",
      "name": "Email Form"
    }
  ],
  "presets": [
    {
      "name": "t:sections.password_page.name"
    }
  ]
}
{% endschema %}