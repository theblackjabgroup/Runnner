{{ 'section-footer.css' | asset_url | stylesheet_tag }}
{{ 'component-newsletters.css' | asset_url | stylesheet_tag }}
{{ 'footer.css' | asset_url | stylesheet_tag }}
{{ 'scroll-animations.css' | asset_url | stylesheet_tag }}

<script src="{{ 'scroll-animations.js' | asset_url }}" defer="defer"></script>

{% style %}
  :root {
    --footer-menu-item-color: {{ section.settings.menu_item_color }};
    --footer-email-input-color: {{ section.settings.email_input_color | default: '#FFFFFF'}};
    --footer-bg-color: {{ section.settings.footer_bg_color | default: '#000000' }};
    --footer-hover-color: {{ section.settings.hover_color | default: '#808080' }};
    --footer-email-signup-hover-text-color: {{ section.settings.email_signup_hover_text_color | default: '#FFFFFF' }};
  }

  /* Control existing underline animation direction */
  {% if settings.hover_Animation %}
    .animated-underline::after {
      {% if settings.underline_animation_direction == 'right-to-left' %}
        transform-origin: right;
      {% else %}
        transform-origin: left;
      {% endif %}
    }

    .animated-underline:hover::after {
      {% if settings.underline_animation_direction == 'left-to-right' %}
        transform: scaleX(0);
        transform-origin: right;
      {% elsif settings.underline_animation_direction == 'right-to-left' %}
        transform: scaleX(0);
        transform-origin: left;
      {% endif %}
    }
  {% else %}
    .animated-underline::after {
      display: none !important;
    }
  {% endif %}
{% endstyle %}

<style>
  /* Mobile background image */
  @media (max-width: 640px) {
    .animated-footer-background {
      {% if section.settings.mobile_background_image != blank %}
        background-image: url('{{ section.settings.mobile_background_image | image_url: width: 800 }}') !important;
      {% elsif section.settings.background_image != blank %}
        background-image: url('{{ section.settings.background_image | image_url: width: 1920 }}') !important;
      {% endif %}
    }
  }
</style>

<footer
  class="bb-footer-container color-{{ section.settings.color_scheme }} p-4 sm:px-6 md:px-8 md:py-8 relative overflow-hidden scroll-fade-trigger scroll-fade-up footer-container"
  style="
    padding-top: var(--sections-spacing-top);
    padding-bottom: var(--sections-spacing-bottom);
    margin-top: {{ section.settings.margin_top }}px;
    margin-bottom: {{ section.settings.margin_bottom }}px;
  "
  role="contentinfo"
>
  <div
    class="animated-footer-background {% if section.settings.background_image == blank %}no-image{% elsif section.settings.enable_bg_animation == false %}paused{% endif %}"
    {% if section.settings.background_image != blank %}
      style="background-image: url('{{ section.settings.background_image | image_url: width: 1920 }}');"
    {% endif %}
  >
    &nbsp;
  </div>

  <div class="animated-grain"></div>

  <!-- Footer Content -->
  <div class="footer-content">
    {% assign menu_blocks = section.blocks | where: 'type', 'menu' %}

    {% for block in section.blocks %}
      <div class="w-full footer-section scroll-fade-trigger scroll-fade-up" data-animation-index="{{ forloop.index0 }}">
        {% case block.type %}
          {% when 'email_signup' %}
            <div class="email-signup-section footer-block" {{ block.shopify_attributes }}>
              {% form 'customer', id: 'email-signup-form', class: 'email-signup-container newsletter-form' %}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <input type="hidden" name="form_type" value="customer">

                <div
                  id="message-container"
                  class="message-container"
                  style="display: none;"
                  aria-live="polite"
                  role="status"
                >
                  <div class="newsletter-form__message--success">
                    {{ 'newsletter.success' | t | default: 'Thanks for signing up!' }}
                  </div>
                </div>

                <div id="form-fields-container12" class="form-fields-container12">
                  <label for="email-input12" class="sr-only">
                    {{- block.settings.email_placeholder | default: 'EMAIL' -}}
                  </label>
                  <input
                    type="email"
                    id="email-input12"
                    name="contact[email]"
                    class="email-input12 body-font"
                    placeholder="{{ block.settings.email_placeholder | default: 'EMAIL' }}"
                    required
                    autocomplete="email"
                    aria-required="true"
                  >
                  <button
                    type="submit"
                    class="signup-button body-font newsletter-form__button hover-icon-button"
                    aria-label="{{ block.settings.button_text | default: 'SIGN ME UP' }}"
                    name="commit"
                  >
                    <div class="arrow-hover">
                      <div class="arrow-wrapper">
                        <span class="arrow-wrapper">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M9 6l6 6-6 6" />
                          </svg>
                        </span>
                      </div>
                    </div>
                    <span>{{ block.settings.button_text | default: 'SIGN ME UP' }}</span>
                  </button>
                </div>
              {% endform %}
            </div>

          {% when 'support' %}
            <div class="bb-support-section support-section mt-[0px] md:mt-[1%] justify-end desktop-ml-15 footer-block">
              <div
                class="bb-support-content-wrapper support-content-wrapper w-[350px] md:max-w-[50%] custom-mr-25 md:ml-0"
                {{ block.shopify_attributes }}
              >
                <p
                  class="uppercase md:normal-case font-medium text-[14px] md:text-[24px] break-words text-left heading-font"
                  style="margin-bottom: 5px; margin-top: 2px; color: {{ section.settings.menu_item_color }}; line-height: normal;"
                >
                  {{ block.settings.support_heading }}
                </p>

                <p
                  class="md:normal-case mt-1 text-[14px] md:text-[24px] break-words text-left leading-tight body-font"
                  style="line-height: 1.2; width: auto; color: {{ section.settings.menu_item_color }};"
                >
                  {{ block.settings.support_text }}
                </p>

                <a
                  href="mailto:{{ block.settings.email_address }}"
                  class="relative mt-2 inline-block text-[16px] md:text-[24px] uppercase md:normal-case animated-underline break-words group body-font"
                  style="margin-top: 15px; color: {{ section.settings.menu_item_color }};"
                >
                  {{ block.settings.email_link_text }}

                  {% render 'icon-playback', width: '20px', height: '20px', class: 'email-icon' %}
                </a>

                <div class="support-social-icons social-icons-hover" aria-labelledby="social-heading-support">
                  <h4 id="social-heading-support" class="sr-only">Follow Us</h4>
                  {%- if settings.social_instagram_link != blank -%}
                    <a href="{{ settings.social_instagram_link }}" class="social-icon" aria-label="Instagram">
                      {{
                        'icon-instagram.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_youtube_link != blank -%}
                    <a href="{{ settings.social_youtube_link }}" class="social-icon" aria-label="YouTube">
                      {{
                        'icon-youtube.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_twitter_link != blank -%}
                    <a href="{{ settings.social_twitter_link }}" class="social-icon" aria-label="Twitter">
                      {{
                        'icon-twitter.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_facebook_link != blank -%}
                    <a href="{{ settings.social_facebook_link }}" class="social-icon" aria-label="Facebook">
                      {{
                        'icon-facebook.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 30px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_snapchat_link != blank -%}
                    <a href="{{ settings.social_snapchat_link }}" class="social-icon" aria-label="Snapchat">
                      {{
                        'icon-snapchat.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                </div>
              </div>
            </div>
            <div class="hidden" {{ block.shopify_attributes }}></div>

            <div class="bb-footer-main-row footer-main-row footer-container-wrapper">
              <!-- Menu Section -->
              <nav
                class="menu-section custom-nav-mr-25 footer-block"
                aria-label="Footer Navigation"
              >
                <div class="bb-inner-footer-main-row flex flex-wrap justify-start md:justify-end footer-main-row">
                  <div
                    class="flex flex-row flex-wrap justify-start md:justify-end custom-gap w-full mr-[20px] md:ml-0 menu-content-wrapper"
                    {{ block.shopify_attributes }}
                  >
                    {% for menu_block in menu_blocks %}
                      <div class="menu-block" {{ menu_block.shopify_attributes }}>
                        <div class="flex flex-col w-auto">
                          <div class="flex flex-col space-y-1">
                            {% for link in linklists[menu_block.settings.menu_links].links %}
                              <a
                                href="{{ link.url }}"
                                class="text-[16px] body-font"
                                style="color: {{ section.settings.menu_item_color }}; line-height: 20px;"
                              >
                                {{- link.title -}}
                              </a>
                            {% endfor %}
                          </div>
                        </div>
                      </div>
                    {% endfor %}
                  </div>
                </div>

                <div class="mobile-social-icons" aria-labelledby="mobile-social-heading">
                  <h4 id="mobile-social-heading" class="sr-only">Follow Us</h4>
                  {%- if settings.social_instagram_link != blank -%}
                    <a href="{{ settings.social_instagram_link }}" class="social-icon" aria-label="Instagram">
                      {{
                        'icon-instagram.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 30px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_youtube_link != blank -%}
                    <a href="{{ settings.social_youtube_link }}" class="social-icon" aria-label="YouTube">
                      {{
                        'icon-youtube.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_twitter_link != blank -%}
                    <a href="{{ settings.social_twitter_link }}" class="social-icon" aria-label="Twitter">
                      {{
                        'icon-twitter.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_facebook_link != blank -%}
                    <a href="{{ settings.social_facebook_link }}" class="social-icon" aria-label="Facebook">
                      {{
                        'icon-facebook.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 30px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_tiktok_link != blank -%}
                    <a href="{{ settings.social_tiktok_link }}" class="social-icon" aria-label="TikTok">
                      {{
                        'icon-tiktok.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_snapchat_link != blank -%}
                    <a href="{{ settings.social_snapchat_link }}" class="social-icon" aria-label="Snapchat">
                      {{
                        'icon-snapchat.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                </div>
              </nav>

              <!-- Logo Section -->
              {% if section.settings.logo != blank %}
                {% assign logo_width = 380 %}
                {% assign logo_height = logo_width | divided_by: section.settings.logo.aspect_ratio | round %}
                <div class="logo-section bb-logo-container logo-container footer-block">
                  <img
                    srcset="
                      {%- if section.settings.logo.width >= 190 -%}{{ section.settings.logo | image_url: width: 190 }} 190w,{%- endif -%}
                      {%- if section.settings.logo.width >= 380 -%} {{ section.settings.logo | image_url: width: 380 }} 380w,{%- endif -%}
                      {%- if section.settings.logo.width >= 760 -%} {{ section.settings.logo | image_url: width: 760 }} 760w,{%- endif -%}
                      {%- if section.settings.logo.width >= 1140 -%} {{ section.settings.logo | image_url: width: 1140 }} 1140w,{%- endif -%} {{ section.settings.logo | image_url }} {{ section.settings.logo.width }}w
                    "
                    sizes="(max-width: 768px) 200px, 380px"
                    src="{{ section.settings.logo | image_url: width: 380 }}"
                    alt="{{ shop.name }}"
                    width="{{ logo_width }}"
                    height="{{ logo_height }}"
                    loading="lazy"
                    decoding="async"
                  >
                </div>
              {% else %}
                <div class="logo-section logo-container footer-block">
                  <div class="text-logo font-bold heading-font">{{ shop.name }}</div>
                </div>
              {% endif %}
            </div>
        {% endcase %}
      </div>
    {% endfor %}
  </div>
</footer>

<style>
  /* --- TABLET/MEDIUM SCREEN SIZING --- */
  @media (min-width: 769px) and (max-width: 1023px) {
    .email-input12,
    .signup-button {
      height: 55px !important;
      min-height: 55px !important;
      max-height: 55px !important;
      font-size: 18px !important;
      line-height: 55px !important;
      padding: 12px 18px !important;
      box-sizing: border-box !important;
      margin: 0 !important;
      border-width: 1px !important;
      border-radius: 4px !important;
      text-transform: uppercase !important;
      font-weight: 500 !important;
      letter-spacing: 0.5px !important;
    }

    .signup-button {
      display: flex !important;
      align-items: center !important;
      justify-content: space-between !important;
    }

    .signup-button span {
      line-height: 1 !important;
    }

    .signup-button svg {
      height: 1em !important;
      width: 1em !important;
    }
  }

  /* Footer Fade-Up Animations */
  .footer-section.scroll-fade-trigger {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .footer-section.scroll-fade-trigger.animate {
    opacity: 1;
    transform: translateY(0);
  }

  /* Staggered delays for footer sections */
  .footer-animated .footer-section:nth-child(1) {
    transition-delay: 0s;
  }
  .footer-animated .footer-section:nth-child(2) {
    transition-delay: 0.2s;
  }
  .footer-animated .footer-section:nth-child(3) {
    transition-delay: 0.4s;
  }
  .footer-animated .footer-section:nth-child(4) {
    transition-delay: 0.6s;
  }

  /* Smooth hover effects for footer elements */
  .footer-block {
    transition: transform 0.3s ease;
  }

  @media screen and (max-width: 768px) {
    .footer-section.scroll-fade-trigger {
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .footer-animated .footer-section:nth-child(n) {
      transition-delay: calc(var(--index, 0) * 0.15s);
    }
  }

  /* Accessibility - Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .footer-section.scroll-fade-trigger {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const footer = document.querySelector('.footer-container');
    if (!footer) return;

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate');
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.1 }
    );

    footer.querySelectorAll('.footer-section').forEach((section) => {
      observer.observe(section);
    });

    const form = footer.querySelector('#email-signup-form');
    if (form) {
      const emailInput = form.querySelector('#email-input12');
      const messageContainer = footer.querySelector('#message-container');
      const fieldsContainer = footer.querySelector('#form-fields-container12');

      function setMessage(type, text) {
        if (!messageContainer) return;
        messageContainer.innerHTML = '';
        const el = document.createElement('div');
        el.className = `newsletter-form__message--${type}`;
        el.textContent = text;
        messageContainer.appendChild(el);
        messageContainer.style.display = 'block';
      }

      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }
      form.addEventListener('submit', function (e) {
        e.preventDefault();
        const email = emailInput ? emailInput.value.trim() : '';

        if (!email || !isValidEmail(email)) {
          setMessage('error', 'Please enter a valid email address.');
          return;
        }

        const formData = new FormData(form);

        fetch('/contact#contact_form', {
          method: 'POST',
          body: formData,
          headers: { Accept: 'application/json' },
        })
          .then(() => {
            if (emailInput) emailInput.value = '';
            if (fieldsContainer) fieldsContainer.style.display = 'none';
            setMessage('success', 'Thank you for subscribing!');
          })
          .catch(() => {
            // Graceful success even if JSON endpoint not enabled
            if (emailInput) emailInput.value = '';
            if (fieldsContainer) fieldsContainer.style.display = 'none';
            setMessage('success', 'Thank you for subscribing!');
          });
      });
    }
  });
</script>

{% schema %}
{
  "name": "Footer",
  "disabled_on": {
    "groups": ["header"],
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Desktop Background Image",
      "info": "Background image for desktop and tablet views."
    },
    {
      "type": "image_picker",
      "id": "mobile_background_image",
      "label": "Mobile Background Image",
      "info": "Image shown on mobile phones only (640px and below). Falls back to desktop image if not set."
    },
    {
      "type": "checkbox",
      "id": "enable_bg_animation",
      "label": "Enable Background Animation",
      "default": true,
      "info": "Animate the background image with a subtle movement and zoom effect"
    },
    {
      "type": "color",
      "id": "email_input_color",
      "label": "Email Input Color",
      "default": "#DDDDDD"
    },
    {
      "type": "color",
      "id": "footer_bg_color",
      "label": "Footer Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "menu_item_color",
      "label": "Footer Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "email_signup_hover_text_color",
      "label": "Email Signup Hover Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "hover_color",
      "label": "Hover Color",
      "default": "#FFFFFF"
    }
  ],
  "blocks": [
    {
      "type": "email_signup",
      "name": "Email Signup",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "email_placeholder",
          "label": "Email Placeholder",
          "default": "EMAIL"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "SIGN ME UP"
        },
        {
          "type": "text",
          "id": "success_message",
          "label": "Success Message",
          "default": "Thank you for subscribing!"
        },
        {
          "type": "checkbox",
          "id": "show_form_again_after_success",
          "label": "Show form again after successful submission",
          "default": true
        }
      ]
    },
    {
      "type": "menu",
      "name": "Menu",
      "settings": [
        {
          "type": "link_list",
          "id": "menu_links",
          "label": "Menu",
          "default": "footer"
        }
      ]
    },
    {
      "type": "support",
      "name": "Support Section",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "support_heading",
          "label": "Support Heading",
          "default": "NEED SUPPORT?"
        },
        {
          "type": "textarea",
          "id": "support_text",
          "label": "Support Text",
          "default": "We're just an email away. Drop us a line and we'll get back to you within 48 hours for order related inquires."
        },
        {
          "type": "text",
          "id": "email_address",
          "label": "Email Address",
          "default": "support@[yourdomain].com"
        },
        {
          "type": "text",
          "id": "email_link_text",
          "label": "Email Link Text",
          "default": "OPEN EMAIL"
        }
      ]
    },
    {
      "type": "social_icons",
      "name": "Social Icons",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "social_title",
          "label": "Social Media Title",
          "default": "Follow Us"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer",
      "category": "Footer",
      "blocks": [
        {
          "type": "email_signup"
        },
        {
          "type": "support"
        },
        {
          "type": "menu"
        },
        {
          "type": "social_icons"
        }
      ]
    }
  ]
}
{% endschema %}
