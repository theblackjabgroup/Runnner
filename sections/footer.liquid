{{ 'section-footer.css' | asset_url | stylesheet_tag }}
{{ 'component-newsletters.css' | asset_url | stylesheet_tag }}
{{ 'footer.css' | asset_url | stylesheet_tag }}
{{ 'scroll-animations.css' | asset_url | stylesheet_tag }}

<script src="{{ 'scroll-animations.js' | asset_url }}" defer="defer"></script>

{% style %}
  :root {
    --footer-menu-item-color: {{ section.settings.menu_item_color }};
    --footer-email-input-color: {{ section.settings.email_input_color | default: '#FFFFFF'}};
    --footer-bg-color: {{ section.settings.footer_bg_color | default: '#000000' }};
    --footer-hover-color: {{ section.settings.hover_color | default: '#808080' }};
    --footer-email-signup-hover-text-color: {{ section.settings.email_signup_hover_text_color | default: '#FFFFFF' }};
  }
{% endstyle %}

<footer
  class="color-{{ section.settings.color_scheme }}p-4 sm:px-6 md:px-8 md:py-8 relative overflow-hidden scroll-fade-trigger scroll-fade-up"
  style="
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    margin-top: {{ section.settings.margin_top }}px;
    margin-bottom: {{ section.settings.margin_bottom }}px;
    background: {{ section.settings.footer_bg_color | default: '#000000' }};
  "
  role="contentinfo"
>
  <div
    class="animated-footer-background {% if section.settings.background_image == blank %}no-image{% elsif section.settings.enable_bg_animation == false %}paused{% endif %}"
    {% if section.settings.background_image != blank %}
      style="background-image: url('{{ section.settings.background_image | img_url: 'master' }}');"
    {% endif %}
  ></div>

  <div class="animated-grain"></div>

  <!-- Footer Content -->
  <div class="footer-content">
    {% for block in section.blocks %}
      <div class="w-full footer-section scroll-fade-trigger scroll-fade-up" data-animation-index="{{ forloop.index0 }}">
        {% case block.type %}
          {% when 'email_signup' %}
            <div class="email-signup-section footer-block" {{ block.shopify_attributes }}>
              {% form 'customer', id: 'email-signup-form', class: 'email-signup-container newsletter-form' %}
                <input type="hidden" name="contact[tags]" value="newsletter">
                <input type="hidden" name="form_type" value="customer">

                <div
                  id="message-container"
                  class="message-container"
                  style="display: none;"
                  aria-live="polite"
                  role="status"
                >
                  <div class="newsletter-form__message--success">
                    {{ 'newsletter.success' | t | default: 'Thanks for signing up!' }}
                  </div>
                </div>

                <div id="form-fields-container12" class="form-fields-container12">
                  <label for="email-input12" class="sr-only">
                    {{- block.settings.email_placeholder | default: 'EMAIL' -}}
                  </label>
                  <input
                    type="email"
                    id="email-input12"
                    name="contact[email]"
                    class="email-input12 body-font"
                    placeholder="{{ block.settings.email_placeholder | default: 'EMAIL' }}"
                    required
                    autocomplete="email"
                    aria-required="true"
                  >
                  <button
                    type="submit"
                    class="signup-button body-font newsletter-form__button hover-icon-button"
                    aria-label="{{ block.settings.button_text | default: 'SIGN ME UP' }}"
                    name="commit"
                  >
                    <div class="arrow-hover">
                      <div class="arrow-wrapper">
                        <span class="arrow-wrapper">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path d="M9 6l6 6-6 6" />
                          </svg>
                        </span>
                      </div>
                    </div>
                    <span>{{ block.settings.button_text | default: 'SIGN ME UP' }}</span>
                  </button>
                </div>
              {% endform %}
            </div>

          {% when 'support' %}
            <div class="w-1/2 md:w-full flex pr-1 md:pr-2 mt-[0px] md:mt-[1%] justify-end desktop-ml-15 footer-block">
              <div
                style="margin-inline-start: var(--space-sm);"
                class="mb-6 w-[350px] md:max-w-[50%] custom-mr-25 md:ml-0"
                {{ block.shopify_attributes }}
              >
                <p
                  class="uppercase md:normal-case font-medium text-[14px] md:text-[24px] break-words text-left heading-font"
                  style="word-wrap: break-word; overflow-wrap: break-word; margin-bottom: var(--space-xs); margin-top: var(--space-xs); color: {{ section.settings.menu_item_color }}; line-height: normal;"
                >
                  {{ block.settings.support_heading }}
                </p>

                <p
                  class="md:normal-case mt-1 text-[14px] md:text-[24px] break-words text-left leading-tight body-font"
                  style="word-wrap: break-word; overflow-wrap: break-word; line-height: 1.2; width: auto; color: {{ section.settings.menu_item_color }};"
                >
                  {{ block.settings.support_text }}
                </p>

                <a
                  href="mailto:{{ block.settings.email_address }}"
                  class="relative mt-2 inline-block text-[16px] md:text-[24px] uppercase md:normal-case animated-underline break-words group body-font"
                  style="word-wrap: break-word; overflow-wrap: break-word; margin-top: var(--space-md); color: {{ section.settings.menu_item_color }};"
                >
                  {{ block.settings.email_link_text }}

                  {{
                    'icon-email.svg'
                    | inline_asset_content
                    | replace: '<svg',
                      '<svg class="email-icon" role="img" aria-hidden="true" style="height: 20px; fill: '
                    | remove: "'"
                  }}
                </a>

                <div class="support-social-icons social-icons-hover" aria-labelledby="social-heading-support">
                  <h4 id="social-heading-support" class="sr-only">Follow Us</h4>
                  {%- if settings.social_instagram_link != blank -%}
                    <a href="{{ settings.social_instagram_link }}" class="social-icon" aria-label="Instagram">
                      {{
                        'icon-instagram1.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_youtube_link != blank -%}
                    <a href="{{ settings.social_youtube_link }}" class="social-icon" aria-label="YouTube">
                      {{
                        'icon-youtube1.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_twitter_link != blank -%}
                    <a href="{{ settings.social_twitter_link }}" class="social-icon" aria-label="Twitter">
                      {{
                        'icon-twitter1.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_facebook_link != blank -%}
                    <a href="{{ settings.social_facebook_link }}" class="social-icon" aria-label="Facebook">
                      {{
                        'icon-facebook1.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 30px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_snapchat_link != blank -%}
                    <a href="{{ settings.social_snapchat_link }}" class="social-icon" aria-label="Snapchat">
                      {{
                        'icon-snapchat1.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                </div>
              </div>
            </div>
            <div class="hidden" {{ block.shopify_attributes }}></div>

            <div
              class="flex flex-col md:flex-row justify-between items-start w-full"
              style="margin-inline-start: var(--space-md)"
            >
              <!-- Menu Section -->
              <nav
                class="menu-section w-full md:w-2/5 order-1 md:order-2 custom-nav-mr-25 footer-block"
                aria-label="Footer Navigation"
              >
                <div
                  class="flex flex-wrap justify-start md:justify-end"
                  style="margin-inline-start: calc(-1 * var(--space-sm));"
                >
                  <div
                    style="padding-inline-start: var(--space-sm);"
                    class="flex flex-row flex-wrap justify-start md:justify-end custom-gap w-full mr-[20px] md:ml-0"
                    {{ block.shopify_attributes }}
                  >
                    {% for block in section.blocks %}
                      {% case block.type %}
                        {% when 'menu' %}
                          <div class="menu-block" {{ block.shopify_attributes }}>
                            <div class="flex flex-col w-auto">
                              <div class="flex flex-col space-y-1">
                                {% for link in linklists[block.settings.menu_links].links %}
                                  <a
                                    href="{{ link.url }}"
                                    class="text-[16px] body-font"
                                    style="color: {{ section.settings.menu_item_color }}; line-height: 20px;"
                                  >
                                    {{- link.title -}}
                                  </a>
                                {% endfor %}
                              </div>
                            </div>
                          </div>
                      {% endcase %}
                    {% endfor %}
                  </div>
                </div>

                <div class="mobile-social-icons" aria-labelledby="mobile-social-heading">
                  <h4 id="mobile-social-heading" class="sr-only">Follow Us</h4>
                  {%- if settings.social_instagram_link != blank -%}
                    <a href="{{ settings.social_instagram_link }}" class="social-icon" aria-label="Instagram">
                      {{
                        'icon-instagram.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 30px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_youtube_link != blank -%}
                    <a href="{{ settings.social_youtube_link }}" class="social-icon" aria-label="YouTube">
                      {{
                        'icon-youtube.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_twitter_link != blank -%}
                    <a href="{{ settings.social_twitter_link }}" class="social-icon" aria-label="Twitter">
                      {{
                        'icon-twitter.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_facebook_link != blank -%}
                    <a href="{{ settings.social_facebook_link }}" class="social-icon" aria-label="Facebook">
                      {{
                        'icon-facebook.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 30px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_tiktok_link != blank -%}
                    <a href="{{ settings.social_tiktok_link }}" class="social-icon" aria-label="TikTok">
                      {{
                        'icon-tiktok.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                  {%- if settings.social_snapchat_link != blank -%}
                    <a href="{{ settings.social_snapchat_link }}" class="social-icon" aria-label="Snapchat">
                      {{
                        'icon-snapchat.svg'
                        | inline_asset_content
                        | replace: '<svg', '<svg role="img" aria-hidden="true" style="height: 25px; fill: '
                        | append: settings.social_icon_color
                        | remove: "'"
                      }}
                    </a>
                  {%- endif -%}
                </div>
              </nav>

              <!-- Logo Section -->
              {% if section.settings.logo != blank %}
                <div class="bb-logo-container logo-container footer-block">
                  <img
                    src="{{ section.settings.logo | img_url: 'master' }}"
                    alt="{{ shop.name }}"
                    width="760"
                    height="150"
                    loading="lazy"
                  >
                </div>
              {% else %}
                <div class="logo-container footer-block">
                  <div class="text-logo font-bold heading-font">{{ shop.name }}</div>
                </div>
              {% endif %}
            </div>
            </div>
        {% endcase %}
      </div>
    {% endfor %}
  </div>
</footer>

<style>
  /* Footer Fade-Up Animations */
  .footer-section.scroll-fade-trigger {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .footer-section.scroll-fade-trigger.animate {
    opacity: 1;
    transform: translateY(0);
  }

  /* Staggered delays for footer sections */
  .footer-animated .footer-section:nth-child(1) {
    transition-delay: 0s;
  }
  .footer-animated .footer-section:nth-child(2) {
    transition-delay: 0.2s;
  }
  .footer-animated .footer-section:nth-child(3) {
    transition-delay: 0.4s;
  }
  .footer-animated .footer-section:nth-child(4) {
    transition-delay: 0.6s;
  }

  /* Smooth hover effects for footer elements */
  .footer-block {
    transition: transform 0.3s ease;
  }

  @media screen and (max-width: 768px) {
    .footer-section.scroll-fade-trigger {
      transform: translateY(30px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .footer-animated .footer-section:nth-child(n) {
      transition-delay: calc(var(--index, 0) * 0.15s);
    }
  }

  /* Accessibility - Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .footer-section.scroll-fade-trigger {
      opacity: 1 !important;
      transform: none !important;
      transition: none !important;
    }
  }
</style>

<script>
  // Custom Footer Fade-Up Animation
  document.addEventListener('DOMContentLoaded', function() {
    const footer = document.querySelector('.footer-animated');
    if (!footer) return;

    const footerSections = footer.querySelectorAll('.footer-section');

    // Set initial state for all sections
    footerSections.forEach((section, index) => {
      section.style.opacity = '0';
      section.style.transform = 'translateY(50px)';
      section.style.transition = `opacity 0.8s ease ${index * 0.2}s, transform 0.8s ease ${index * 0.2}s`;
    });

    // Create intersection observer
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Trigger fade-up animation
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';

          // Stop observing this element
          observer.unobserve(entry.target);
        }
      });
    }, {
      rootMargin: '0px 0px -50px 0px',
      threshold: 0.1
    const newsletterForm = document.getElementById('email-signup-form');

    if (newsletterForm) {
      const messageContainer = document.getElementById('message-container');
      const formFieldsContainer = document.getElementById('form-fields-container12');

      if (messageContainer) {
        messageContainer.style.padding = 'var(--space-sm)';
        messageContainer.style.margin = 'var(--space-md) 0';
        messageContainer.style.textAlign = 'center';
      }

      newsletterForm.addEventListener('submit', function (e) {
        e.preventDefault();

        const emailInput = document.getElementById('email-input12');
        if (!emailInput) return;

        const email = emailInput.value;

        if (!email || !isValidEmail(email)) {
          showErrorMessage('Please enter a valid email address.');
          return;
        }

        const formData = new FormData(newsletterForm);

        fetch('/contact#contact_form', {
          method: 'POST',
          body: formData,
          headers: { Accept: 'application/json' },
        })
          .then(() => handleSuccessfulSubmission(emailInput))
          .catch(() => handleSuccessfulSubmission(emailInput));

        return false;
      });

      function handleSuccessfulSubmission(emailInput) {
        if (emailInput) emailInput.value = '';
        if (formFieldsContainer) formFieldsContainer.style.display = 'none';

        if (messageContainer) {
          messageContainer.innerHTML = '';
          const successElement = document.createElement('div');
          successElement.className = 'newsletter-form__message--success';
          successElement.textContent = 'Thank you for subscribing!';
          successElement.style.cssText = 'font-size: 20px; font-weight: bold; color: #FFFFFF;';
          messageContainer.appendChild(successElement);
          messageContainer.style.display = 'block';
        }
      }

      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      function showErrorMessage(message) {
        if (!messageContainer) return;
        messageContainer.innerHTML = '';
        const errorMessage = document.createElement('div');
        errorMessage.className = 'newsletter-form__message--error';
        errorMessage.textContent = message;
        errorMessage.style.cssText = 'color: #FFFFFF; font-weight: bold;';
        messageContainer.appendChild(errorMessage);
        messageContainer.style.display = 'block';
        setTimeout(() => {
          messageContainer.style.display = 'none';
          messageContainer.innerHTML = '';
        }, 7000);
      }
    }
  });
</script>

{% schema %}
{
  "name": "Footer",
  "disabled_on": {
    "groups": ["header"],
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image",
      "info": "Select an image from your files for the animated background effect. Leave empty to use the default pattern."
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 40
    },
    {
      "type": "color",
      "id": "email_input_color",
      "label": "Email Input Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "footer_bg_color",
      "label": "Footer Background Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "menu_item_color",
      "label": "Footer Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "email_signup_hover_text_color",
      "label": "Email Signup Hover Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "hover_color",
      "label": "Hover Color",
      "default": "#FFFFFF"
    }
  ],
  "blocks": [
    {
      "type": "email_signup",
      "name": "Email Signup",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "email_placeholder",
          "label": "Email Placeholder",
          "default": "EMAIL"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text",
          "default": "SIGN ME UP"
        },
        {
          "type": "text",
          "id": "success_message",
          "label": "Success Message",
          "default": "Thank you for subscribing!"
        },
        {
          "type": "checkbox",
          "id": "show_form_again_after_success",
          "label": "Show form again after successful submission",
          "default": true
        }
      ]
    },
    {
      "type": "menu",
      "name": "Menu",
      "settings": [
        {
          "type": "link_list",
          "id": "menu_links",
          "label": "Menu",
          "default": "footer"
        }
      ]
    },
    {
      "type": "support",
      "name": "Support Section",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "support_heading",
          "label": "Support Heading",
          "default": "NEED SUPPORT?"
        },
        {
          "type": "textarea",
          "id": "support_text",
          "label": "Support Text",
          "default": "We're just an email away. Drop us a line and we'll get back to you within 48 hours for order related inquires."
        },
        {
          "type": "text",
          "id": "email_address",
          "label": "Email Address",
          "default": "support@bandit.com"
        },
        {
          "type": "text",
          "id": "email_link_text",
          "label": "Email Link Text",
          "default": "OPEN EMAIL"
        }
      ]
    },
    {
      "type": "social_icons",
      "name": "Social Icons",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "social_title",
          "label": "Social Media Title",
          "default": "Follow Us"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Footer",
      "category": "Footer",
      "blocks": [
        {
          "type": "email_signup"
        },
        {
          "type": "support"
        },
        {
          "type": "menu"
        },
        {
          "type": "social_icons"
        }
      ]
    }
  ]
}
{% endschema %}
