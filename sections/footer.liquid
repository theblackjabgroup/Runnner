{{ 'section-footer.css' | asset_url | stylesheet_tag }}

<footer class="color-{{ section.settings.color_scheme }}"
  style="
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    margin-top: {{ section.settings.margin_top }}px;
    margin-bottom: {{ section.settings.margin_bottom }}px;
  ">

  <div class="scroll-distance" role="status" aria-live="polite">
    <p>YOU HAVE SCROLLED</p>
    <div><span id="scrollValueFooter">0.000</span> KM</div>
  </div>

  {% if section.settings.show_social_icons %}
    <div class="footer-column">
      <h4 class="visually-hidden">{{ section.settings.social_title }}</h4>
      <ul class="social-icons" aria-label="Social media links">
        {%- if settings.social_facebook_link != blank -%}
          <li>
            <a
              href="{{ settings.social_facebook_link }}"
              class="social-icon"
              style="color: {{ section.settings.menu_item_color }};"
              aria-label="Facebook"
            >
              {{
                'icon-facebook.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 30px; fill: '
                | append: settings.social_icon_color
                | remove: '_'
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_instagram_link != blank -%}
          <li>
            <a
              href="{{ settings.social_instagram_link }}"
              class="social-icon"
              aria-label="Instagram"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-instagram.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 30px; fill: '
                | append: settings.social_icon_color
                | remove: '_'
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_youtube_link != blank -%}
          <li>
            <a
              href="{{ settings.social_youtube_link }}"
              class="social-icon"
              aria-label="YouTube"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-youtube.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: '_'
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_tiktok_link != blank -%}
          <li>
            <a
              href="{{ settings.social_tiktok_link }}"
              class="social-icon"
              aria-label="TikTok"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-tiktok.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: "'"
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_twitter_link != blank -%}
          <li>
            <a
              href="{{ settings.social_twitter_link }}"
              class="social-icon"
              aria-label="Twitter"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-twitter.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: "'"
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_pinterest_link != blank -%}
          <li>
            <a
              href="{{ settings.social_pinterest_link }}"
              class="social-icon"
              aria-label="Pinterest"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-pinterest.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: "'"
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_snapchat_link != blank -%}
          <li>
            <a
              href="{{ settings.social_snapchat_link }}"
              class="social-icon"
              aria-label="Snapchat"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-snapchat.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: "'"
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_tumblr_link != blank -%}
          <li>
            <a
              href="{{ settings.social_tumblr_link }}"
              class="social-icon"
              aria-label="Tumblr"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-tumblr.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: "'"
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
        {%- if settings.social_vimeo_link != blank -%}
          <li>
            <a
              href="{{ settings.social_vimeo_link }}"
              class="social-icon"
              aria-label="Vimeo"
              style="color: {{ section.settings.menu_item_color }};"
            >
              {{
                'icon-vimeo.svg'
                | inline_asset_content
                | replace: '<svg', '<svg style="height: 25px; fill: '
                | append: settings.social_icon_color
                | remove: "'"
                | replace: '<svg', '<svg role="img" aria-hidden="true" focusable="false"'
              }}
            </a>
          </li>
        {%- endif -%}
      </ul>
    </div>
  {% endif %}

  {% for block in section.blocks %}
    {% case block.type %}
      {% when 'menu' %}
        <nav class="footer-menus" {{ block.shopify_attributes }} aria-label="{{ block.settings.menu_title }}">
          <h4 id="footer-menu-heading-{{ forloop.index }}" style="font-family: var(--font-heading-family) !important;">{{ block.settings.menu_title }}</h4>
          <ul style="font-family: var(--font-body-family) !important;" aria-labelledby="footer-menu-heading-{{ forloop.index }}">
            {% for link in linklists[block.settings.menu_links].links %}
              <li style="font-family: var(--font-body-family) !important;">
                <a
                  href="{{ link.url }}"
                  style="font-family: var(--font-body-family) !important; color: {{ section.settings.menu_item_color }};"
                >
                  {{- link.title -}}
                </a>
              </li>
            {% endfor %}
          </ul>
        </nav>
      {% when 'support' %}
        <div class="support-section" {{ block.shopify_attributes }} role="region" aria-label="Customer Support">
          <h4 id="support-heading">{{ block.settings.support_heading }}</h4>
          <p id="support-text">{{ block.settings.support_text }}</p>
          <a href="mailto:{{ block.settings.email_address }}" class="email-link" aria-describedby="support-text">{{ block.settings.email_link_text }}</a>
        </div>
    {% endcase %}
  {% endfor %}
</footer>

{% style %}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    margin-top: {{ section.settings.margin_top }}px;
    margin-bottom: {{ section.settings.margin_bottom }}px;
  }

  .color-{{ section.settings.color_scheme }} {
    color: {{ settings.colors[section.settings.color_scheme].text }};
  }

  .background-{{ section.settings.color_scheme }} {
    background-color: {{ settings.colors[section.settings.color_scheme].background }};
  }
  
  /* Accessibility styles */
  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    margin: -1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
  }
  
  /* Focus styles */
  a:focus, button:focus {
    outline: 2px solid #4d90fe;
    outline-offset: 2px;
  }
  
  /* Ensure list styling for social icons */
  .social-icons {
    list-style: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
  }
{% endstyle %}

{% javascript %}
document.addEventListener('DOMContentLoaded', () => {
  // Initialize the scroll values on page load
  const headerDistance = document.getElementById('scrollValueHeader');
  const footerDistance = document.getElementById('scrollValueFooter');
  const distanceInKM = (window.scrollY / 1000).toFixed(3);
  if (headerDistance) headerDistance.textContent = distanceInKM;
  if (footerDistance) footerDistance.textContent = distanceInKM;
  
  // Add scroll event listener
  window.addEventListener('scroll', () => {
    const scrollY = window.scrollY;
    const distanceInKM = (scrollY / 1000).toFixed(3);
    const headerDistance = document.getElementById('scrollValueHeader');
    const footerDistance = document.getElementById('scrollValueFooter');
    if (headerDistance) headerDistance.textContent = distanceInKM;
    if (footerDistance) footerDistance.textContent = distanceInKM;
  });
  
  // Add keyboard navigation for social icon links
  const socialLinks = document.querySelectorAll('.social-icon');
  
  socialLinks.forEach((link, index) => {
    link.addEventListener('keydown', (event) => {
      // Handle arrow key navigation
      if (event.key === 'ArrowRight' && index < socialLinks.length - 1) {
        event.preventDefault();
        socialLinks[index + 1].focus();
      } else if (event.key === 'ArrowLeft' && index > 0) {
        event.preventDefault();
        socialLinks[index - 1].focus();
      }
    });
  });
});
{% endjavascript %}

{% schema %}
{
  "name": "Bandit Footer",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme-1",
      "label": "Color Scheme"
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Margin",
      "default": 0
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Margin",
      "default": 0
    },
    {
      "type": "header",
      "content": "Social Media"
    },
    {
      "type": "checkbox",
      "id": "show_social_icons",
      "label": "Show social media icons",
      "default": true
    },
    {
      "type": "text",
      "id": "social_title",
      "label": "Social Media Title",
      "default": "FOLLOW US"
    }
  ],
  "blocks": [
    {
      "type": "menu",
      "name": "Menu",
      "settings": [
        {
          "type": "text",
          "id": "menu_title",
          "label": "Menu Title",
          "default": "Quick Links"
        },
        {
          "type": "link_list",
          "id": "menu_links",
          "label": "Menu",
          "default": "footer"
        }
      ]
    },
    {
      "type": "support",
      "name": "Support Section",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "support_heading",
          "label": "Support Heading",
          "default": "NEED SUPPORT?"
        },
        {
          "type": "textarea",
          "id": "support_text",
          "label": "Support Text",
          "default": "We're just an email away. Drop us a line and we'll get back to you within 48 hours for order related inquires."
        },
        {
          "type": "text",
          "id": "email_address",
          "label": "Email Address",
          "default": "abc@gmail.com"
        },
        {
          "type": "text",
          "id": "email_link_text",
          "label": "Email Link Text",
          "default": "OPEN EMAIL →"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Bandit Footer",
      "category": "Footer",
      "blocks": [
        {
          "type": "support"
        },
        {
          "type": "menu"
        }
      ]
    }
  ]
}
{% endschema %}
