{% if section.settings.enabled %}
  <div
    class="featured-collection-page-width overflow-hidden "
    role="region"
    aria-labelledby="featured-collection-heading"
    aria-describedby="featured-collection-description"
  >
    {% if section.settings.heading != blank %}
      <div
        style="font-weight:500;"
        class="featured-collection-main-heading mb-[-10px] letter-animation"
      >
        {{ section.settings.heading }}
      </div>
    {% endif %}

    <div class="flex justify-between items-center w-full featured-collection-subheading">
      <div class="flex-grow md:text-[24px] text-2xl md:mt-[-20px]">
        {% if section.settings.description != blank %}
          {{ section.settings.description }}
        {% endif %}
      </div>
      <div class="flex-shrink-0">
        {% if section.settings.show_shop_all and section.settings.main_collection %}
          <a
            href="{{ section.settings.main_collection.url }}"
            class="image-with-text-custom-button"
            aria-label="{{ section.settings.button_text }} for {{ section.settings.main_collection.title }}"
          >
            <div class="image-with-text-button-text-container">
              <div class="image-with-text-button-text">
                {{ section.settings.button_text }}
                {% comment %}
                  <span class="image-with-text-button-arrow">
                    <svg width="28" height="36" viewBox="0 0 38 36" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
                      <path fill="currentColor" d="M26.79,9.21A35.06,35.06,0,0,0,37,16.2v3.66a35.34,35.34,0,0,0-10.21,7A12.84,12.84,0,0,0,23.21,36H17.56q0-6.22,3-10a15.4,15.4,0,0,1,8.06-5.2V20.6H0V15.43H28.63v-.3A15.16,15.16,0,0,1,20.57,10q-3-3.77-3-10h5.65a13,13,0,0,0,.87,5A12.79,12.79,0,0,0,26.79,9.21Z"/>
                    </svg>
                  </span>
                {% endcomment %}
              </div>
              <div class="image-with-text-button-text-hover">
                {{ section.settings.button_text }}
                {% comment %}
                  <span class="image-with-text-button-arrow">
                    <svg width="28" height="36" viewBox="0 0 38 36" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5">
                      <path fill="currentColor" d="M26.79,9.21A35.06,35.06,0,0,0,37,16.2v3.66a35.34,35.34,0,0,0-10.21,7A12.84,12.84,0,0,0,23.21,36H17.56q0-6.22,3-10a15.4,15.4,0,0,1,8.06-5.2V20.6H0V15.43H28.63v-.3A15.16,15.16,0,0,1,20.57,10q-3-3.77-3-10h5.65a13,13,0,0,0,.87,5A12.79,12.79,0,0,0,26.79,9.21Z"/>
                    </svg>
                  </span>
                {% endcomment %}
              </div>
            </div>
          </a>
        {% endif %}
      </div>
    </div>

    <hr class="border-black-300 my-6" aria-hidden="true">

    <div class="featured_collection_filters flex flex-col md:flex-row mt-10" style="gap:18px; margin-top:18px;">
      <nav
        class="collections-container text-[24px] w-full md:w-[400px] min-w-[350px] order-1 md:order-none mb-4 md:mb-0"
        aria-label="Collection filters"
      >
        <div class="collection-filters flex flex-row md:flex-col flex-wrap" role="tablist" aria-label="Collections">
          {% for block in section.blocks %}
            {% if block.settings.collection == blank %}
              {% assign button_collection_id = 'blank-' | append: block.id %}
            {% else %}
              {% assign button_collection_id = block.settings.collection.id %}
            {% endif %}

            <button
              class="collection-btn {% if forloop.first %}active{% endif %} w-auto md:w-full h-[54px] flex items-center justify-between"
              role="tab"
              aria-selected="{% if forloop.first %}true{% else %}false{% endif %}"
              tabindex="{% if forloop.first %}0{% else %}-1{% endif %}"
              type="button"
              data-collection="{{ button_collection_id }}"
            >
              <span class="label-text">{{ block.settings.label }}</span>
              {% comment %}
                <svg class="svg-arrow-right" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 37 36" width="18" height="18">
                  <path fill="currentColor" d="M26.79,9.21A35.06,35.06,0,0,0,37,16.2v3.66a35.34,35.34,0,0,0-10.21,7A12.84,12.84,0,0,0,23.21,36H17.56q0-6.22,3-10a15.4,15.4,0,0,1,8.06-5.2V20.6H0V15.43H28.63v-.3A15.16,15.16,0,0,1,20.57,10q-3-3.77-3-10h5.65a13,13,0,0,0,.87,5A12.79,12.79,0,0,0,26.79,9.21Z"/>
                </svg>
              {% endcomment %}
              <img
                src="{{ "arrow-down.png" | asset_url }}"
                alt="Dropdown Icon"
                class="w-12 h-6 object-contain transition-transform duration-300 group-hover:-rotate-90 collection-arrow-img"
                width="100%"
                height="auto"
                aria-hidden="true"
              >
            </button>
          {% endfor %}
        </div>
      </nav>

      <main class="products-container w-full md:flex-1 order-2 md:order-none">
        {% comment %} Create array of unique collection IDs to prevent duplicates {% endcomment %}
        {% assign unique_collections = '' %}
        {% assign processed_collection_ids = '' %}

        {% for block in section.blocks %}
          {% if block.settings.collection == blank %}
            {% assign collection_id = 'blank-' | append: block.id %}
          {% else %}
            {% assign collection_id = block.settings.collection.id | append: '' %}
          {% endif %}

          {% unless processed_collection_ids contains collection_id %}
            {% assign unique_collections = unique_collections | append: block.id | append: ',' %}
            {% assign processed_collection_ids = processed_collection_ids | append: collection_id | append: ',' %}
          {% endunless %}
        {% endfor %}

        {% assign unique_collections_array = unique_collections | split: ',' %}

        {% for block in section.blocks %}
          {% assign block_id_string = block.id | append: '' %}
          {% if unique_collections_array contains block_id_string %}
            {% if block.settings.collection == blank %}
              {% assign container_collection_id = 'blank-' | append: block.id %}
            {% else %}
              {% assign container_collection_id = block.settings.collection.id %}
            {% endif %}

            <div
              class="collection-products-container {% unless forloop.first %}hidden{% endunless %}"
              data-collection-id="{{ container_collection_id }}"
              role="tabpanel"
              aria-labelledby="tab-{{ container_collection_id }}"
              tabindex="0"
            >
              <div class="slider-container relative">
                <div
                  id="product-slider-{{ container_collection_id }}"
                  class="product-slider flex gap-2 md:gap-4 cursor-grab overflow-x-auto custom-scrollbar"
                  role="list"
                  aria-label="Products in {{ block.settings.label }}"
                >
                  {% if block.settings.collection == blank or block.settings.collection.products.size == 0 %}
                    <article
                      class="product-card flex-none w-[220px] md:w-[450px]"
                      role="listitem"
                      aria-label="No products found"
                    >
                      <div class="product-image-wrapper relative group" aria-hidden="true">
                        {{ 'collection-1' | placeholder_svg_tag }}
                      </div>
                      <div class="product-details mt-3" style="margin-bottom:8px;">
                        <h3 class="!text-[1.6rem] uppercase font-medium leading-tight">No products found</h3>
                        <div class="flex gap-2 items-baseline fc-price" style="margin-top: -6px;">
                          <span class="!text-[1.6rem] uppercase font-medium">â€”</span>
                        </div>
                      </div>
                    </article>
                  {% else %}
                    {% for product in block.settings.collection.products %}
                      <article
                        class="product-card flex-none w-[220px] md:w-[450px]"
                        role="listitem"
                        aria-label="{{ product.title }}"
                      >
                        <div class="product-image-wrapper relative group">
                          {% unless product.available %}
                            <div class="absolute top-3 right-4 z-10">
                              <span class="inline-block rounded-xl px-4 text-[12px] tracking-wide font-medium bg-zinc-800 text-white">
                                SOLD OUT
                              </span>
                            </div>
                          {% endunless %}

                          <a
                            href="{{ product.url }}"
                            class="product-image-link block relative"
                            aria-label="{{ product.title }}"
                          >
                            <div class="product-images-container relative">
                              {% if product.images.size > 1 %}
                                {% for image in product.images %}
                                  <img
                                    src="{{ image | img_url: '450x544', crop: 'center' }}"
                                    alt="{{ product.title }}{% if forloop.index > 1 %} image {{ forloop.index }}{% endif %}"
                                    class="product-image {% if forloop.first %}active{% else %}inactive{% endif %} fc-product-image"
                                    data-index="{{ forloop.index0 }}"
                                    data-product-id="{{ product.id }}"
                                    loading="lazy"
                                    decoding="async"
                                    width="450"
                                    height="544"
                                    style="object-fit: cover; width: 450px; height: 544px;"
                                  >
                                {% endfor %}

                                <button
                                  class="image-nav-arrow image-nav-prev"
                                  data-product-id="{{ product.id }}"
                                  aria-label="Previous image for {{ product.title }}"
                                >
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                    width="32"
                                    height="32"
                                    style="opacity: 0.6;"
                                  >
                                    <path fill="currentColor" d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                                  </svg>
                                </button>
                                <button
                                  class="image-nav-arrow image-nav-next"
                                  data-product-id="{{ product.id }}"
                                  aria-label="Next image for {{ product.title }}"
                                >
                                  <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    viewBox="0 0 24 24"
                                    width="32"
                                    height="32"
                                    style="opacity: 0.6;"
                                  >
                                    <path fill="currentColor" d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                                  </svg>
                                </button>
                              {% else %}
                                <img
                                  src="{{ product.featured_image | img_url: '450x544', crop: 'center' }}"
                                  alt="{{ product.title }}"
                                  class="fc-product-image"
                                  loading="lazy"
                                  decoding="async"
                                  width="450"
                                  height="544"
                                  style="object-fit: cover; width: 450px; height: 544px;"
                                >
                              {% endif %}
                            </div>
                          </a>

                          <div class="product-cart-container absolute bottom-4 left-1/2 transform -translate-x-1/2 w-full px-4">
                            <div class="cart-options-wrapper relative">
                              {% assign has_size_variants = false %}
                              {% unless product.has_only_default_variant %}
                                {% for option in product.options_with_values %}
                                  {% if option.name == 'Size' or option.name == 'size' %}
                                    {% assign has_size_variants = true %}
                                  {% endif %}
                                {% endfor %}
                              {% endunless %}

                              {% if has_size_variants %}
                                <div
                                  class="size-variants-container bg-white rounded p-2 mb-0 opacity-0 invisible"
                                  role="group"
                                  aria-label="Size options for {{ product.title }}"
                                >
                                  {% for option in product.options_with_values %}
                                    {% if option.name == 'Size' or option.name == 'size' %}
                                      {% assign size_option_index = forloop.index0 %}
                                      <div class="size-label-wrapper flex items-center w-full">
                                        <span class="size-label text-m font-semibold px-2 mr-auto">SELECT SIZE</span>
                                        <div
                                          class="size-options-wrapper flex flex-wrap gap-4 justify-end"
                                          data-option-index="{{ size_option_index }}"
                                        >
                                          {% for value in option.values %}
                                            {% assign variant_available = false %}
                                            {% for variant in product.variants %}
                                              {% if variant.options[size_option_index] == value and variant.available %}
                                                {% assign variant_available = true %}
                                                {% assign variant_id = variant.id %}
                                                {% break %}
                                              {% endif %}
                                            {% endfor %}

                                            <button
                                              class="size-option-btn p-5 bg-gray-200 text-s rounded size-animate {% unless variant_available %}unavailable-size{% endunless %}"
                                              {% if variant_available %}
                                                data-variant-id="{{ variant_id }}"
                                                data-product-id="{{ product.id }}"
                                              {% else %}
                                                data-waitlist="true"
                                                data-product-id="{{ product.id }}"
                                                data-product-title="{{ product.title | escape }}"
                                                data-variant-size="{{ value }}"
                                                aria-disabled="true"
                                              {% endif %}
                                              style="--animation-order: {{ forloop.index }}"
                                              aria-label="Size {{ value }}{% unless variant_available %} - Sold Out{% endunless %}"
                                              {% unless variant_available %}
                                                aria-disabled="true"
                                              {% endunless %}
                                            >
                                              {{ value }}
                                            </button>
                                          {% endfor %}
                                        </div>
                                      </div>
                                    {% endif %}
                                  {% endfor %}
                                </div>
                              {% endif %}

                              {% if product.available %}
                                <button
                                  class="add-to-cart-btn w-90 bg-white text-black py-2 px-4 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300"
                                  data-product-id="{{ product.id }}"
                                  {% if product.has_only_default_variant %}
                                    data-variant-id="{{ product.variants.first.id }}"
                                    data-has-variants="false"
                                  {% elsif has_size_variants %}
                                    data-has-variants="true"
                                  {% else %}
                                    data-variant-id="{{ product.variants.first.id }}"
                                    data-has-variants="false"
                                  {% endif %}
                                  aria-label="Add {{ product.title }} to cart"
                                >
                                  Add to Cart
                                </button>
                              {% else %}
                                <button
                                  class="notify-me-btn w-90 bg-white text-black py-2 px-4 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-300"
                                  data-product-id="{{ product.id }}"
                                  data-product-title="{{ product.title | escape }}"
                                  data-has-variants="{% if has_size_variants %}true{% else %}false{% endif %}"
                                  aria-label="Get notified when {{ product.title }} is back in stock"
                                  aria-haspopup="dialog"
                                >
                                  Notify Me When In Stock
                                </button>
                              {% endif %}
                            </div>
                          </div>
                        </div>

                        <div class="product-details mt-3" style="margin-bottom:8px;">
                          <a href="{{ product.url }}" aria-label="{{ product.title }}">
                            <h3 class="!text-[1.6rem] uppercase font-medium leading-tight">
                              {{ product.title | escape }}
                            </h3>
                            <div class="flex gap-2 items-baseline fc-price">
                              <span class="!text-[1.6rem] uppercase font-medium"> {{ product.price | money }} </span>
                              {%- if product.compare_at_price > product.price -%}
                                |<span class="!text-[1.6rem] uppercase text-red-600">
                                  {{- product.compare_at_price | money }} FOR MEMBERS</span
                                >
                              {%- endif -%}
                            </div>
                          </a>
                        </div>
                      </article>
                    {% endfor %}
                  {% endif %}
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </main>
    </div>
  </div>

  <div
    id="waitlist-modal-overlay"
    class="fixed inset-0 z-50 bg-black/50 hidden items-center justify-center"
    aria-modal="true"
    aria-labelledby="waitlist-product-title"
    aria-describedby="waitlist-product-variant"
  >
    <div class="bg-white !w-auto md:!w-[50vw] max-w-[90vw] rounded p-4 md:p-10 shadow-lg mx-4">
      <div class="flex justify-end p-2 md:p-4">
        <button
          id="close-waitlist-modal"
          class="text-black hover:text-gray-700 font-medium"
          aria-label="Close waitlist form"
        >
          CLOSE
        </button>
      </div>

      <h2 class="text-xl md:text-2xl font-bold mb-2" id="waitlist-product-title">PRODUCT TITLE</h2>

      <div class="text-gray-600 mb-4" id="waitlist-product-variant">XS / PORT</div>

      <hr class="border-gray-300 mx-2 md:mx-6" aria-hidden="true">

      <div class="my-4 md:my-6">
        <p class="font-medium mb-4 text-sm md:text-base">
          Waitlist: Enter your email to get notified when this product becomes available again.
        </p>

        <div class="flex flex-col sm:flex-row gap-3 mb-4" aria-label="Waitlist notification form">
          <input
            type="email"
            id="waitlist-email"
            placeholder="Your email"
            class="flex-grow border border-gray-300 p-2 md:p-3 rounded text-sm md:text-base"
          >
          <button
            id="get-notified-btn"
            class="bg-black text-white py-2 md:py-3 px-4 md:px-6 font-medium hover:bg-gray-800 rounded text-sm md:text-base"
            aria-label="Submit waitlist request"
          >
            GET NOTIFIED
          </button>
        </div>
      </div>
    </div>
  </div>
{% endif %}

<style>
    .featured-collection-page-width ::selection {
      /* background: none; */
      color: var(--hover) !important;
    }
    .featured-collection-page-width {
      margin: 0 10px;
      overflow-y: hidden;
    }

    .featured-collection-subheading {
      /* margin-top: -30px; */
    }

    div.featured-collection-main-heading {
      line-height: 80% !important;
      font-size: 3rem;
      left: -3px;
    }

    .collection-filters {
      justify-content: center;
    }

    @media (min-width: 500px) {
      div.featured-collection-main-heading {
        font-size: 5rem;
      }
    }

    @media (min-width: 768px) {
      .collections-container {
        width: 350px !important;
        min-width: 350px;
        max-width: 400px;
      }

      div.featured-collection-main-heading {
        font-size: 80px;
      }

      .products-container {
        width: calc(100% - 400px - 1.5rem) !important;
        overflow: hidden;
      }

      .slider-container {
        margin-right: -1.5rem;
      }

      .product-slider {
        padding-right: 1.5rem;
      }
    }

    .collection-filters .collection-btn {
      padding: 0.5rem 1.2rem;
      padding-left: 0;
      border-bottom: 1px solid black;
      text-align: left;
      background: #fff;
      color: #000;
      text-decoration: none;
      transition: all 0.3s ease;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      position: relative;
    }

    .svg-arrow-right {
      opacity: 0;
      transition: opacity 0.3s ease, transform 0.3s ease;
      transform: translateX(-4px);
    }
    .collection-btn:hover .svg-arrow-right,
    .collection-btn.active .svg-arrow-right {
      opacity: 1;
      transform: translateX(0);
    }

    .collection-filters .collection-btn:hover,
    .collection-filters .collection-btn.active {
      background: #000;
      color: #fff;
    }

    .product-image-wrapper {
      position: relative;
      overflow: hidden;
    }

    .product-images-container {
      position: relative;
    }

    /* Updated image transition styles */
    .product-image {
      position: absolute;
      top: 0;
      left: 0;
      opacity: 0;
      /* pointer-events: none; */
      transition: opacity 0.5s ease;
    }

    .product-image.active {
      opacity: 1;
      /* pointer-events: auto; */
      position: relative;
    }

    .fc-price{
        margin-top: -6px !important;
      }

    .image-nav-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      z-index: 15;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: opacity 0.3s ease, background-color 0.3s ease;
      cursor: pointer;
      border: none;
    }

    .product-image-wrapper:hover .image-nav-arrow {
      opacity: 0.6;
    }

    .image-nav-arrow:hover {
      background-color: rgba(68, 68, 68, 0.15);
    }

    .image-nav-prev {
      left: 0px;
    }

    .image-nav-next {
      right: 0px;
    }

    .product-cart-container {
      z-index: 10;
      width: 90%;
    }

    .cart-options-wrapper {
      position: relative;
    }

    .add-to-cart-btn,
    .notify-me-btn {
      transition: all 0.3s ease;
      width: 110%;
      left: -5%;
      height: 40px;
      position: relative;
      z-index: 5;
      cursor: pointer;
    }

    .add-to-cart-btn:hover,
    .notify-me-btn:hover {
      background-color: black;
      color: white;
    }

    .size-variants-container {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 110%;
      left: -5%;
      height: 100%;
      z-index: 10;
      transition: all 0.3s ease;
      transform: translateY(0);
      display: flex;
      justify-content: center;
      padding: 2px;
    }

    .size-label-wrapper {
      display: flex;
      width: 110%;
      left: -5%;
      align-items: center;
    }

    .size-label {
      margin-right: auto;
      font-weight: 600;
      color: #000;
    }

    .product-cart-container:hover .size-variants-container,
    .size-variants-container.active {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateY(0);
    }

    .product-cart-container:hover .add-to-cart-btn[data-has-variants='true'] {
      opacity: 0 !important;
      visibility: hidden;
    }

    .product-cart-container:hover .add-to-cart-btn[data-has-variants='false'],
    .product-cart-container:hover .notify-me-btn {
      opacity: 1 !important;
      visibility: visible !important;
    }

    .size-option-btn {
      transition: all 0.2s ease;
      width: 30px;
      height: 30px;
      border: 1px solid #000;
      padding: 2px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    .unavailable-size {
      opacity: 1;
      position: relative;
      cursor: not-allowed;
      border-color: #ccc;
      color: #ccc;
      overflow: hidden;
    }

    .unavailable-size::after {
      content: '';
      position: absolute;
      top: 50%;
      left: -2px;
      right: -2px;
      height: 1px;
      background-color: #ccc;
      transform: rotate(-45deg);
    }

    .size-option-btn:hover {
      transform: translateY(-2px);
    }

    .size-option-btn.size-animate {
      opacity: 0;
      transform: translateY(20px);
      animation: sizeAppear 0.3s ease forwards;
      animation-delay: calc(0.1s * var(--animation-order));
    }

    @keyframes sizeAppear {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .size-variants-container:not(.active) .size-option-btn {
      animation: none;
      opacity: 0;
      transform: translateY(20px);
    }

    .size-variants-container.active .size-option-btn {
      animation: sizeAppear 0.3s ease forwards;
      animation-delay: calc(0.1s * var(--animation-order));
    }

    .shop-all-button {
      display: inline-block;
      text-align: center;
      padding: 2px 5px;
      font-weight: bold;
      background-color: #000;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .shop-all-button:hover {
      background-color: #555;
    }

    {% if section.settings.uppercase_text %}
      .featured-collection-page-width h2 {
        text-transform: uppercase !important;
      }
    {% endif %}

    hr {
      border: 0;
      background: #000;
      margin: 5px 0;
    }

    .slider-container {
      position: relative;
      width: 100%;
      overflow-x: auto;
      overflow-y: hidden;
      -webkit-overflow-scrolling: touch;
      height: auto;
      padding-bottom: 24px;
    }

    .product-slider {
      display: flex;
      gap: 18px;
      overflow-y: hidden;
    }

    .product-card {
      flex-shrink: 0;
      height: auto;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      overflow: hidden;
    }

    .product-slider::-webkit-scrollbar:vertical {
      display: none;
    }

    .cursor-grab {
      cursor: grab;
      padding-bottom: 12px;
    }

    .cursor-grabbing {
      cursor: grabbing;
    }

    .custom-scrollbar::-webkit-scrollbar {
      height: 8px;
      background: transparent;
      transform: translateY(-50%);
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background-color: transparent;
      background-image: linear-gradient(to right, black, black);
      background-size: 100% 1px;
      background-repeat: no-repeat;
      background-position: center;
      border: none;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background-color: black;
      height: 3px;
      border: none;
      /* border-radius: 4px; */
      margin-top: -1px;
    }

    .custom-scrollbar::-webkit-scrollbar-button:single-button {
      display: none;
      width: 0;
      height: 0;
    }

    #waitlist-modal-overlay {
      transition: opacity 0.3s ease;
    }

    #waitlist-modal-overlay.hidden {
      opacity: 0;
      /* pointer-events: none; */
    }

    #waitlist-product-title {
      text-transform: uppercase;
      font-weight: bold;
    }

    #waitlist-email {
      border: 1px solid #ccc;
    }

    #get-notified-btn {
      white-space: nowrap;
      text-transform: uppercase;
    }

    .product-cart-container:hover .notify-me-btn[data-has-variants='true'] {
      opacity: 0 !important;
      visibility: hidden !important;
    }

    .product-cart-container:hover .size-variants-container {
      opacity: 1 !important;
      visibility: visible !important;
      transform: translateY(0);
    }

    .image-with-text-custom-button {
      position: relative;
      display: inline-block;
      padding: 2px 7px;
      background-color: white;
      color: black;
      border-radius: 4px;
      border: black 1px solid !important;
      overflow: hidden;
      transition: background-color 0s, color 0s;
    }

    .image-with-text-custom-button:hover {
      background-color: black;
      border: white 2px solid;
      color: white;
      border: 2px solid white;
    }

    .image-with-text-button-text-container {
      position: relative;
      width: 100%;
      overflow: hidden;
    }

    .image-with-text-button-text {
      display: flex;
      align-items: center;
      font-size: 24px;
      line-height: 1;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transition: transform 0.7s ease;
    }

    .image-with-text-custom-button:hover .image-with-text-button-text {
      transform: translateX(-100%);
    }

    .image-with-text-button-text-hover {
      position: absolute;
      top: 0;
      left: 0;
      display: flex;
      align-items: center;
      font-size: 24px;
      line-height: 1;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      transform: translateX(100%);
      transition: transform 0.7s ease;
    }

    .image-with-text-custom-button:hover .image-with-text-button-text-hover {
      transform: translateX(0);
    }

    .image-with-text-custom-button:not(:hover) .image-with-text-button-text,
    .image-with-text-custom-button:not(:hover) .image-with-text-button-text-hover {
      transition: none;
    }

    .image-with-text-button-arrow {
      margin-left: 28px;
    }

    .product-image-wrapper {
    position: relative;
    overflow: hidden;
  }
  .product-image {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: opacity 0.5s ease-in-out;
    opacity: 0;
    /* pointer-events: none; */
  }
  .product-image.active {
    opacity: 1;
    /* pointer-events: auto; */
  }

    @media (max-width: 768px) {
      .collection-filters {
        gap: 5px;
        justify-content: left;
      }

      .collection-btn {
        padding: 0 6px !important;
        border: none !important;
        border-radius: 4px !important;
        background: #f4f4f4 !important;
        font-size: 14px !important;
        min-width: fit-content !important;
        height: 24px !important;
      }

      .product-slider {
        gap: 8px;
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
      }
      .product-slider::-webkit-scrollbar {
        display: none;
      }

      .slider-container {
        overflow-x: hidden !important;
      }

      .collection-arrow-img{
        display: none !important;
      }

      .featured-collection-main-heading {
        padding-top: 10px;
      }

      .fc-product-image {
        width: 225px !important;
        height: 277px !important;
      }

      .fc-price{
        margin-top: -6px
      }

      .cursor-grab{
        padding-bottom: 0px;
      }

      .featured-collection-subheading {
        /* margin-top: -10px; */
      }

      .collection-btn.active {
        background: #000 !important;
        color: #fff !important;
      }

      .collection-btn .svg-arrow-right {
        display: none !important;
      }
      .size-variants-container,
      .product-cart-container,
      .cart-options-wrapper {
        display: none !important;
        opacity: 0 !important;
        visibility: hidden !important;
      }
    }

    @media (max-width: 425px) {
      .featured-collection-subheading {
        /* margin-top: -10px; */
      }
    }

    @keyframes letterAppear {
      0% {
        transform: translateX(10000%);
        opacity: 0;
      }
      100% {
        transform: translateX(0);
        opacity: 1;
      }
    }
    .letter-animation-container {
      display: inline-block;
      width: 100%;
      overflow: visible;
      position: relative;
    }
    .animated-letter {
      display: inline-block;
      opacity: 0;
      transform: translateX(500%);
      position: relative;
    }

    /* Ensure hidden elements are completely removed from layout */
    .hidden {
      display: none !important;
    }

    /* Make more specific for collection containers */
    .collection-products-container.hidden {
      display: none !important;
      visibility: hidden;
      position: absolute;
      /* pointer-events: none; */
      opacity: 0;
      z-index: -1;
    }
</style>

<script src="{{ 'featured-collection.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Featured Collection",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "enabled",
      "label": "Enable section",
      "default": true
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Collections"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Browse our featured products</p>"
    },
    {
      "type": "checkbox",
      "id": "show_shop_all",
      "label": "Show 'Shop All' button",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "uppercase_text",
      "label": "Make heading uppercase",
      "default": false,
      "info": "If enabled, heading will be displayed in uppercase."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "SHOP ALL",
      "info": "Text for the 'Shop All' button"
    },
    {
      "type": "collection",
      "id": "main_collection",
      "label": "Main collection for 'Shop All'",
      "info": "Collection to link when 'Shop All' is clicked"
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Collection",
      "limit": 10,
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Collection Name",
          "default": "Collection"
        },
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection",
          "info": "Select a collection to display"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Featured Collection",
      "blocks": [
        {
          "type": "collection"
        },
        {
          "type": "collection"
        },
        {
          "type": "collection"
        }
      ]
    }
  ]
}
{% endschema %}
