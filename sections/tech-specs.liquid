{% if template == 'product' %}
  <section
    class="tech-specs-container color-{{ section.settings.color_scheme }} bg-color:var(--background) box-border overflow-x-hidden"
    style="padding: var(--space-7xl) var(--gutter-sm);"
  >
    <div class="tech-specs-outer">
      <div class="tech-specs-main flex flex-col lg:flex-row relative items-start">
        <!-- LEFT COLUMN: TECH SPECS -->
        <div
          class="tech-left-box relative z-20 flex flex-col min-h-full w-full lg:w-[80%]"
        >
          <h2 class="tech-left-box-heading !text-[32px] !font-medium tracking-wide uppercase text-left">
            {{ section.settings.tech_specs_heading }}
          </h2>
          <div>
            {% for block in section.blocks %}
              {% case block.type %}
                {% when 'fit_pocketing' %}
                  <div {{ block.shopify_attributes }}>
                    <!-- Fit -->
                    <div class="tech-specs-data-border flex flex-row items-center border-b">
                      <span class="tech-specs-data text-[12px] font-normal">
                        {{ block.settings.fit_label }}
                      </span>
                      <span class="text-[12px] font-medium flex items-center  pl-6">
                        {{ product.metafields.tech_specs.fit.value | default: block.settings.fit_value }}
                      </span>
                    </div>
                    <!-- Pocketing -->
                    <div class="tech-specs-data-border flex flex-row items-center border-b">
                      <span class="tech-specs-data text-[12px] font-normal">
                        {{ block.settings.pocketing_label }}
                      </span>
                      <span class="text-[12px] font-medium pl-6">
                        {{- product.metafields.tech_specs.pocketing.value | default: block.settings.pocketing_value -}}
                      </span>
                    </div>
                  </div>

                {% when 'effort_temperature' %}
                  <div {{ block.shopify_attributes }}>
                    <div class="flex flex-col  border-b">
                      <!-- Effort -->
                      <div class="flex flex-col lg:flex-row border-b">
                        <!-- Text Column -->
                        <div class="tech-specs-data-border grid grid-cols-2 ">
                          <div class="tech-specs-data">
                            <div class="text-[13px] font-medium mb-1">
                              {{ block.settings.effort_label }}
                            </div>
                            <div class="text-[12px] font-normal mb-2">
                              {{ block.settings.effort_desc }}
                            </div>
                          </div>
                          <div class="tech-specs-bars flex flex-col items-center justify-center pl-6">
                            <!-- Effort Bar -->
                            <div class="flex justify-between w-full max-w-full" id="effort-bar">
                              {% for i in (1..52) %}
                                <div class="box">|</div>
                              {% endfor %}
                            </div>
                            <!-- Scale Labels -->
                            <div class="flex justify-between text-[12px] w-full mt-1">
                              <span>{{ block.settings.effort_scale_0 }}</span>
                              <span>{{ block.settings.effort_scale_25 }}</span>
                              <span>{{ block.settings.effort_scale_50 }}</span>
                              <span>{{ block.settings.effort_scale_75 }}</span>
                              <span>{{ block.settings.effort_scale_100 }}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- Temperature -->
                      <div class="tech-specs-data-border grid grid-cols-2">
                        <div class="tech-specs-data">
                          <div class="text-[13px] font-medium mb-1">
                            {{ block.settings.temperature_label }}
                          </div>
                          <div class="text-[12px] font-normal mb-2">
                            {{ block.settings.temperature_desc }}
                          </div>
                        </div>
                        <div class="tech-specs-bars flex flex-col items-center justify-center pl-6">
                          <!-- Temperature Bar -->
                          <div class="flex justify-between w-full max-w-full" id="temperature-bar">
                            {% for i in (1..52) %}
                              <div class="box">|</div>
                            {% endfor %}
                          </div>
                          <!-- Scale Labels -->
                          <div class="flex justify-between text-[14px] w-full mt-1">
                            <span>{{ block.settings.temp_scale_0 }}</span>
                            <span>{{ block.settings.temp_scale_32 }}</span>
                            <span>{{ block.settings.temp_scale_50 }}</span>
                            <span>{{ block.settings.temp_scale_70 }}</span>
                            <span>{{ block.settings.temp_scale_85 }}</span>
                            <span>{{ block.settings.temp_scale_95 }}</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
              {% endcase %}
            {% endfor %}

            <div class="flex flex-col lg:flex-row" style="margin-top: var(--space-lg);">
              {% for block in section.blocks %}
                {% if block.type == 'materials' or block.type == 'care' or block.type == 'additional_info' %}
                  {% case block.type %}
                    {% when 'materials' %}
                      <div {{ block.shopify_attributes }} class="w-full lg:w-1/3 mb-2 lg:mb-0">
                        <div class="font-medium text-[16px] mb-3 text-left">
                          {{ block.settings.materials_label }}
                        </div>
                        <div class="text-[12px] font-normal leading-relaxed text-left">
                          {{ product.metafields.tech_specs.materials.value | default: block.settings.materials_value }}
                        </div>
                      </div>
                    {% when 'care' %}
                      <div {{ block.shopify_attributes }} class="w-full lg:w-1/3 mb-2 lg:mb-0">
                        <div class="font-medium text-[16px] mb-3 text-left">
                          {{ block.settings.care_label }}
                        </div>
                        <div class="text-[12px] font-normal leading-relaxed text-left">
                          {% assign care_lines = product.metafields.tech_specs.care.value
                            | default: block.settings.care_value
                            | split: '\n'
                          %}
                          {% for line in care_lines %}
                            <div class="flex items-start gap-2 mb-2">
                              <span>{{ line }}</span>
                            </div>
                          {% endfor %}
                        </div>
                      </div>
                    {% when 'additional_info' %}
                      <div {{ block.shopify_attributes }} class="w-full lg:w-1/3">
                        <div class="text-[12px] font-normal leading-relaxed text-left">
                          {{ block.settings.additional_info }}
                        </div>
                      </div>
                  {% endcase %}
                {% endif %}
              {% endfor %}
            </div>
          </div>
        </div>

        <!-- RIGHT COLUMN: FUNCTIONALITY -->
        {% for block in section.blocks %}
          {% if block.type == 'functionality' %}
            <div
              {{ block.shopify_attributes }}
              class="functionality-right-box relative flex flex-col lg:w-[20%]"
            >
              <h2 class=" functionality-right-box-heading !text-[32px] !font-medium tracking-wide uppercase">
                {{ block.settings.features_heading }}
              </h2>
              <div class="flex flex-col" style="gap: var(--gutter-md);">
                <!-- Feature 1 -->
                <div class="flex items-center" style="gap: var(--gutter-md); ">
                  <span
                    class="functionality-icons-background flex-shrink-0 rounded-full flex items-center justify-center"
                    style="background-color: var(--background); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); width:82px; height:83px;"
                  >
                    {% if block.settings.feature_icon_1 != blank %}
                      <img
                        srcset="
                          {%- if block.settings.feature_icon_1.width >= 34 -%}{{ block.settings.feature_icon_1 | image_url: width: 34 }} 34w,{%- endif -%}
                          {%- if block.settings.feature_icon_1.width >= 67 -%}{{ block.settings.feature_icon_1 | image_url: width: 67 }} 67w,{%- endif -%}
                          {%- if block.settings.feature_icon_1.width >= 134 -%}{{ block.settings.feature_icon_1 | image_url: width: 134 }} 134w,{%- endif -%}
                          {{ block.settings.feature_icon_1 | image_url }} {{ block.settings.feature_icon_1.width }}w
                        "
                        sizes="67px"
                        src="{{ block.settings.feature_icon_1 | image_url: width: 67 }}"
                        alt="{{ block.settings.feature_icon_1.alt | escape | default: 'Feature 1 Icon' }}"
                        class="feature-icon"
                        style="width:50px;height:50px;"
                        loading="lazy"
                        decode="async"
                        width="67"
                        height="67"
                      >
                    {% else %}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="50"
                        height="50"
                        fill="currentColor"
                        viewBox="0 0 256 256"
                      >
                        <path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160Zm88-29.84q.06-2.16,0-4.32l14.92-18.64a8,8,0,0,0,1.48-7.06,107.21,107.21,0,0,0-10.88-26.25,8,8,0,0,0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186,40.54a8,8,0,0,0-3.94-6,107.71,107.71,0,0,0-26.25-10.87,8,8,0,0,0-7.06,1.49L130.16,40Q128,40,125.84,40L107.2,25.11a8,8,0,0,0-7.06-1.48A107.6,107.6,0,0,0,73.89,34.51a8,8,0,0,0-3.93,6L67.32,64.27q-1.56,1.49-3,3L40.54,70a8,8,0,0,0-6,3.94,107.71,107.71,0,0,0-10.87,26.25,8,8,0,0,0,1.49,7.06L40,125.84Q40,128,40,130.16L25.11,148.8a8,8,0,0,0-1.48,7.06,107.21,107.21,0,0,0,10.88,26.25,8,8,0,0,0,6,3.93l23.72,2.64q1.49,1.56,3,3L70,215.46a8,8,0,0,0,3.94,6,107.71,107.71,0,0,0,26.25,10.87,8,8,0,0,0,7.06-1.49L125.84,216q2.16.06,4.32,0l18.64,14.92a8,8,0,0,0,7.06,1.48,107.21,107.21,0,0,0,26.25-10.88,8,8,0,0,0,3.93-6l2.64-23.72q1.56-1.48,3-3L215.46,186a8,8,0,0,0,6-3.94,107.71,107.71,0,0,0,10.87-26.25,8,8,0,0,0-1.49-7.06Zm-16.1-6.5a73.93,73.93,0,0,1,0,8.68,8,8,0,0,0,1.74,5.48l14.19,17.73a91.57,91.57,0,0,1-6.23,15L187,173.11a8,8,0,0,0-5.1,2.64,74.11,74.11,0,0,1-6.14,6.14,8,8,0,0,0-2.64,5.1l-2.51,22.58a91.32,91.32,0,0,1-15,6.23l-17.74-14.19a8,8,0,0,0-5-1.75h-.48a73.93,73.93,0,0,1-8.68,0,8,8,0,0,0-5.48,1.74L100.45,215.8a91.57,91.57,0,0,1-15-6.23L82.89,187a8,8,0,0,0-2.64-5.1,74.11,74.11,0,0,1-6.14-6.14,8,8,0,0,0-5.1-2.64L46.43,170.6a91.32,91.32,0,0,1-6.23-15l14.19-17.74a8,8,0,0,0,1.74-5.48,73.93,73.93,0,0,1,0-8.68,8,8,0,0,0-1.74-5.48L40.2,100.45a91.57,91.57,0,0,1,6.23-15L69,82.89a8,8,0,0,0,5.1-2.64,74.11,74.11,0,0,1,6.14-6.14A8,8,0,0,0,82.89,69L85.4,46.43a91.32,91.32,0,0,1,15-6.23l17.74,14.19a8,8,0,0,0,5.48,1.74,73.93,73.93,0,0,1,8.68,0,8,8,0,0,0,5.48-1.74L155.55,40.2a91.57,91.57,0,0,1,15,6.23L173.11,69a8,8,0,0,0,2.64,5.1,74.11,74.11,0,0,1,6.14,6.14,8,8,0,0,0,5.1,2.64l22.58,2.51a91.32,91.32,0,0,1,6.23,15l-14.19,17.74A8,8,0,0,0,199.87,123.66Z"/>
                      </svg>
                    {% endif %}
                  </span>
                  <div class="functionality-feature-content">
                    <div class="font-medium uppercase text-[14px] mb-4 tracking-wide">
                      {{
                        block.settings.feature1_title
                        | default: product.metafields.functionality.feature_title1.value
                      }}
                    </div>
                    <div class="text-[14px] font-normal leading-relaxed">
                      {{
                        block.settings.feature1_desc
                        | default: product.metafields.functionality.feature_description1.value
                      }}
                    </div>
                  </div>
                </div>

                <!-- Feature 2 -->
                <div class="flex items-center" style="gap: var(--gutter-md); ">
                  <span
                    class="functionality-icons-background flex-shrink-0 rounded-full flex items-center justify-center"
                    style="background-color: var(--background); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); width:82px; height:83px;"
                  >
                    {% if block.settings.feature_icon_2 != blank %}
                      <img
                        srcset="
                          {%- if block.settings.feature_icon_2.width >= 34 -%}{{ block.settings.feature_icon_2 | image_url: width: 34 }} 34w,{%- endif -%}
                          {%- if block.settings.feature_icon_2.width >= 67 -%}{{ block.settings.feature_icon_2 | image_url: width: 67 }} 67w,{%- endif -%}
                          {%- if block.settings.feature_icon_2.width >= 134 -%}{{ block.settings.feature_icon_2 | image_url: width: 134 }} 134w,{%- endif -%}
                          {{ block.settings.feature_icon_2 | image_url }} {{ block.settings.feature_icon_2.width }}w
                        "
                        sizes="67px"
                        src="{{ block.settings.feature_icon_2 | image_url: width: 67 }}"
                        alt="{{ block.settings.feature_icon_2.alt | escape | default: 'Feature 2 Icon' }}"
                        class="feature-icon"
                        style="width:50px;height:50px;"
                        loading="lazy"
                        decode="async"
                        width="67"
                        height="67"
                      >
                    {% else %}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="50"
                        height="50"
                        fill="currentColor"
                        viewBox="0 0 256 256"
                      >
                        <path d="M196,88a27.86,27.86,0,0,0-13.35,3.39A28,28,0,0,0,144,74.7V44a28,28,0,0,0-56,0v80l-3.82-6.13A28,28,0,0,0,35.73,146l4.67,8.23C74.81,214.89,89.05,240,136,240a88.1,88.1,0,0,0,88-88V116A28,28,0,0,0,196,88Zm12,64a72.08,72.08,0,0,1-72,72c-37.63,0-47.84-18-81.68-77.68l-4.69-8.27,0-.05A12,12,0,0,1,54,121.61a11.88,11.88,0,0,1,6-1.6,12,12,0,0,1,10.41,6,1.76,1.76,0,0,0,.14.23l18.67,30A8,8,0,0,0,104,152V44a12,12,0,0,1,24,0v68a8,8,0,0,0,16,0V100a12,12,0,0,1,24,0v20a8,8,0,0,0,16,0v-4a12,12,0,0,1,24,0Z"/>
                      </svg>
                    {% endif %}
                  </span>
                  <div class="functionality-feature-content">
                    <div class="font-medium uppercase text-[14px] mb-4 tracking-wide">
                      {{
                        block.settings.feature2_title
                        | default: product.metafields.functionality.feature_title2.value
                      }}
                    </div>
                    <div class="text-[14px] font-normal leading-relaxed">
                      {{
                        block.settings.feature2_desc
                        | default: product.metafields.functionality.feature_description2.value
                      }}
                    </div>
                  </div>
                </div>

                <!-- Feature 3 -->
                <div class="flex items-center" style="gap: var(--gutter-md);">
                  <span
                    class="functionality-icons-background flex-shrink-0 rounded-full flex items-center justify-center"
                    style="background-color: var(--background); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); width:82px; height:83px;"
                  >
                    {% if block.settings.feature_icon_3 != blank %}
                      <img
                        srcset="
                          {%- if block.settings.feature_icon_3.width >= 34 -%}{{ block.settings.feature_icon_3 | image_url: width: 34 }} 34w,{%- endif -%}
                          {%- if block.settings.feature_icon_3.width >= 67 -%}{{ block.settings.feature_icon_3 | image_url: width: 67 }} 67w,{%- endif -%}
                          {%- if block.settings.feature_icon_3.width >= 134 -%}{{ block.settings.feature_icon_3 | image_url: width: 134 }} 134w,{%- endif -%}
                          {{ block.settings.feature_icon_3 | image_url }} {{ block.settings.feature_icon_3.width }}w
                        "
                        sizes="67px"
                        src="{{ block.settings.feature_icon_3 | image_url: width: 67 }}"
                        alt="{{ block.settings.feature_icon_3.alt | escape | default: 'Feature 3 Icon' }}"
                        class="feature-icon"
                        style="width:50px;height:50px;"
                        loading="lazy"
                        decode="async"
                        width="67"
                        height="67"
                      >
                    {% else %}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="50"
                        height="50"
                        fill="currentColor"
                        viewBox="0 0 256 256"
                      >
                        <path d="M152,224a8,8,0,0,1-8,8H112a8,8,0,0,1,0-16h32A8,8,0,0,1,152,224ZM128,112a12,12,0,1,0-12-12A12,12,0,0,0,128,112Zm95.62,43.83-12.36,55.63a16,16,0,0,1-25.51,9.11L158.51,200h-61L70.25,220.57a16,16,0,0,1-25.51-9.11L32.38,155.83a16.09,16.09,0,0,1,3.32-13.71l28.56-34.26a123.07,123.07,0,0,1,8.57-36.67c12.9-32.34,36-52.63,45.37-59.85a16,16,0,0,1,19.6,0c9.34,7.22,32.47,27.51,45.37,59.85a123.07,123.07,0,0,1,8.57,36.67l28.56,34.26A16.09,16.09,0,0,1,223.62,155.83ZM99.43,184h57.14c21.12-37.54,25.07-73.48,11.74-106.88C156.55,47.64,134.49,29,128,24c-6.51,5-28.57,23.64-40.33,53.12C74.36,110.52,78.31,146.46,99.43,184Zm-15,5.85Q68.28,160.5,64.83,132.16L48,152.36,60.36,208l.18-.13ZM208,152.36l-16.83-20.2q-3.42,28.28-19.56,57.69l23.85,18,.18.13Z"/>
                      </svg>
                    {% endif %}
                  </span>
                  <div class="functionality-feature-content">
                    <div class="font-medium uppercase text-[14px] mb-4 tracking-wide">
                      {{
                        block.settings.feature3_title
                        | default: product.metafields.functionality.feature_title3.value
                      }}
                    </div>
                    <div class="text-[14px] font-normal leading-relaxed">
                      {{
                        block.settings.feature3_desc
                        | default: product.metafields.functionality.feature_description3.value
                      }}
                    </div>
                  </div>
                </div>

                <!-- Feature 4 -->
                <div class="flex items-center" style="gap: var(--gutter-md);">
                  <span
                    class="functionality-icons-background flex-shrink-0 rounded-full flex items-center justify-center"
                    style="background-color: var(--background); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); width:82px; height:83px;"
                  >
                    {% if block.settings.feature_icon_4 != blank %}
                      <img
                        srcset="
                          {%- if block.settings.feature_icon_4.width >= 34 -%}{{ block.settings.feature_icon_4 | image_url: width: 34 }} 34w,{%- endif -%}
                          {%- if block.settings.feature_icon_4.width >= 67 -%}{{ block.settings.feature_icon_4 | image_url: width: 67 }} 67w,{%- endif -%}
                          {%- if block.settings.feature_icon_4.width >= 134 -%}{{ block.settings.feature_icon_4 | image_url: width: 134 }} 134w,{%- endif -%}
                          {{ block.settings.feature_icon_4 | image_url }} {{ block.settings.feature_icon_4.width }}w
                        "
                        sizes="67px"
                        src="{{ block.settings.feature_icon_4 | image_url: width: 67 }}"
                        alt="{{ block.settings.feature_icon_4.alt | escape | default: 'Feature 4 Icon' }}"
                        class="feature-icon"
                        style="width:50px;height:50px;"
                        loading="lazy"
                        decode="async"
                        width="67"
                        height="67"
                      >
                    {% else %}
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="50"
                        height="50"
                        fill="currentColor"
                        viewBox="0 0 256 256"
                      >
                        <path d="M216,72H180.92c.39-.33.79-.65,1.17-1A29.53,29.53,0,0,0,192,49.57,32.62,32.62,0,0,0,158.44,16,29.53,29.53,0,0,0,137,25.91a54.94,54.94,0,0,0-9,14.48,54.94,54.94,0,0,0-9-14.48A29.53,29.53,0,0,0,97.56,16,32.62,32.62,0,0,0,64,49.57,29.53,29.53,0,0,0,73.91,71c.38.33.78.65,1.17,1H40A16,16,0,0,0,24,88v32a16,16,0,0,0,16,16v64a16,16,0,0,0,16,16H200a16,16,0,0,0,16-16V136a16,16,0,0,0,16-16V88A16,16,0,0,0,216,72ZM149,36.51a13.69,13.69,0,0,1,10-4.5h.49A16.62,16.62,0,0,1,176,49.08a13.69,13.69,0,0,1-4.5,10c-9.49,8.4-25.24,11.36-35,12.4C137.7,60.89,141,45.5,149,36.51Zm-64.09.36A16.63,16.63,0,0,1,96.59,32h.49a13.69,13.69,0,0,1,10,4.5c8.39,9.48,11.35,25.2,12.39,34.92-9.72-1-25.44-4-34.92-12.39a13.69,13.69,0,0,1-4.5-10A16.6,16.6,0,0,1,84.87,36.87ZM40,88h80v32H40Zm16,48h64v64H56Zm144,64H136V136h64Zm16-80H136V88h80v32Z"/>
                      </svg>
                    {% endif %}
                  </span>
                  <div class="functionality-feature-content">
                    <div class="font-medium uppercase text-[14px] mb-4 tracking-wide">
                      {{
                        block.settings.feature4_title
                        | default: product.metafields.functionality.feature_title4.value
                      }}
                    </div>
                    <div class="text-[14px] font-normal leading-relaxed">
                      {{
                        block.settings.feature4_desc
                        | default: product.metafields.functionality.feature_description4.value
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </section>
{% endif %}

<style>
     .tech-specs-data-border{
      border-color: var(--border);
      border-opacity: 0.1;
      gap: var(--space-5xl);
    }
    .tech-left-box, .functionality-right-box{
      color: var(--text);
    }
    .functionality-right-box{
      padding-left: var(--space-3xl) !important;
    }
    .functionality-right-box-heading, .tech-left-box-heading{
      margin-bottom: var(--space-3xl);
    }
    .tech-specs-main{
      gap: var(--space-3xl);
    }
    .tech-specs-data{
      padding: var(--space-3xl) 0;
    }

    .box {
      transition: all 0.3s ease;
    }

    /* Hide excess bars on smaller screens */
    @media (max-width: 480px) {
      .box:nth-child(n+30) {
        display: none;
      }
    }

    @media (min-width: 481px) and (max-width: 990px) {
      .box:nth-child(n+41) {
        display: none;
      }
    }
    .functionality-right-box {
      border-left: 1px solid var(--border);
      border-opacity: 0.1;
    }

    .tech-specs-data {
      width: 230px;
    }
    .box {
    }
    .box.filled {
      color: {{ section.settings.bar_color | default: 'red' }};
    }
     .functionality-feature-content {
       display: flex;
       flex-direction: column;
       justify-content: center;
       min-height: 83px;
     }
     @media (max-width: 1024px){
      .functionality-right-box {
      border-left: none;
      padding-left: 0 !important;
     }
  }

    @media screen and (min-width: 750px) {


      #effort-bar, #temperature-bar {
        gap: var(--space-sm);
      }
    }


    @media screen and (max-width: 1445px) {
      .tech-specs-container {
        padding: var(--space-6xl) var(--gutter-lg) !important;
      }
      .tech-specs-data-border{
        gap: var(--space-xl);
      }
      #effort-bar, #temperature-bar {
        gap: var(--space-md);
      }
    }
    @media (max-width: 400px){
      #effort-bar, #temperature-bar {
        gap: var(--space-xs);
      }
    }


    @media (max-width: 700px) {
      .tech-specs-container{
        padding: var(--gutter-md) var(--gutter-sm-safe-right) var(--gutter-md) var(--gutter-sm-safe-left) !important;
      }

      .tech-specs-bars {
        padding-left: 0;
        width: 100%;
      }
      .tech-specs-data {
        width: 170px;
      }
      .tech-width {
        width: auto;
      }
      .functionality-icons-background{
        height: 63px !important;
        width: 62px !important;
      }

      .functionality-icons {
        width: 50px;
        height: 51px;
      }
      .tech-specs-bars .box:nth-child(n + 30) {
        display: none;
      }
      .functionality-right-box {
        border-left: none;
      }
    }
</style>

<script>
  function updateTechSpecBars() {
    const effortValue = {{ product.metafields.tech_specs.effort.value | default: 0 }};
    const tempMin = {{ product.metafields.tech_specs.temp_min.value | default: 0 }};
    const tempMax = {{ product.metafields.tech_specs.temp_max.value | default: 0 }};

    const isMobile = window.innerWidth <= 480;
    const isTablet = window.innerWidth > 480 && window.innerWidth <= 990;
    const totalBars = isMobile ? 29 : (isTablet ? 40 : 52);

    // Effort bars
    const effortBar = document.getElementById('effort-bar');
    if (effortBar && effortValue > 0) {
      const effortBars = effortBar.querySelectorAll('.box');
      const effortFilled = Math.floor((effortValue * totalBars) / 100);
      effortBars.forEach((bar, i) => {
        if (i < effortFilled) {
          bar.classList.add('filled');
        } else {
          bar.classList.remove('filled');
        }
      });
    }

    // Temperature bars
    const temperatureBar = document.getElementById('temperature-bar');
    if (temperatureBar && tempMin >= 0 && tempMax > 0 && tempMax > tempMin) {
      const tempBars = temperatureBar.querySelectorAll('.box');
      const tempStartPos = Math.round((tempMin / 95) * (totalBars - 1));
      const tempEndPos = Math.round((tempMax / 95) * (totalBars - 1));
      tempBars.forEach((bar, i) => {
        if (i >= tempStartPos && i <= tempEndPos) {
          bar.classList.add('filled');
        } else {
          bar.classList.remove('filled');
        }
      });
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    updateTechSpecBars();
    let lastIsMobile = window.innerWidth <= 480;
    let lastIsTablet = window.innerWidth > 480 && window.innerWidth <= 990;

    window.addEventListener('resize', function() {
      const isMobile = window.innerWidth <= 480;
      const isTablet = window.innerWidth > 480 && window.innerWidth <= 990;

      if (isMobile !== lastIsMobile || isTablet !== lastIsTablet) {
        lastIsMobile = isMobile;
        lastIsTablet = isTablet;
        updateTechSpecBars();
      }
    });
  });
</script>
{% schema %}
{
  "name": "Tech Specs",
  "tag": "section",
  "enabled_on": { "templates": ["product"] },
  "settings": [
    {
      "type": "text",
      "id": "tech_specs_heading",
      "label": "Tech Specs Heading",
      "default": "TECH SPECS"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-2"
    },
    {
      "type": "color",
      "id": "bar_color",
      "label": "Bar Fill Color",
      "default": "#ff0000"
    }
  ],
  "blocks": [
    {
      "type": "fit_pocketing",
      "name": "Fit & Pocketing",
      "settings": [
        {
          "type": "text",
          "id": "fit_label",
          "label": "Fit Label",
          "default": "Fit"
        },
        {
          "type": "text",
          "id": "fit_value",
          "label": "Fit Value (default)",
          "default": "Fitted"
        },
        {
          "type": "text",
          "id": "pocketing_label",
          "label": "Pocketing Label",
          "default": "Pocketing"
        },
        {
          "type": "text",
          "id": "pocketing_value",
          "label": "Pocketing Value (default)",
          "default": "2 Gel, 1 Phone"
        }
      ]
    },
    {
      "type": "functionality",
      "name": "Functionality",
      "settings": [
        {
          "type": "text",
          "id": "features_heading",
          "label": "Features Heading",
          "default": "FUNCTIONALITY"
        },
        {
          "type": "text",
          "id": "feature1_title",
          "label": "Feature 1 Title",
          "default": "FEATURE 1"
        },
        {
          "type": "textarea",
          "id": "feature1_desc",
          "label": "Feature 1 Description",
          "default": "Briefly describe the first feature here. Highlight the main benefit and explain how it improves the product experience for the customer."
        },
        {
          "type": "image_picker",
          "id": "feature_icon_1",
          "label": "Feature 1 Icon"
        },
        {
          "type": "text",
          "id": "feature2_title",
          "label": "Feature 2 Title",
          "default": "FEATURE 2"
        },
        {
          "type": "textarea",
          "id": "feature2_desc",
          "label": "Feature 2 Description",
          "default": "Use this space to describe the second feature in detail. Explain its purpose, why it matters, and how it enhances usability, comfort, or performance for users."
        },
        {
          "type": "image_picker",
          "id": "feature_icon_2",
          "label": "Feature 2 Icon"
        },
        {
          "type": "text",
          "id": "feature3_title",
          "label": "Feature 3 Title",
          "default": "FEATURE 3"
        },
        {
          "type": "textarea",
          "id": "feature3_desc",
          "label": "Feature 3 Description",
          "default": "Describe the third feature clearly. Focus on its unique quality, the value it adds, and how it benefits users during everyday use."
        },
        {
          "type": "image_picker",
          "id": "feature_icon_3",
          "label": "Feature 3 Icon"
        },
        {
          "type": "text",
          "id": "feature4_title",
          "label": "Feature 4 Title",
          "default": "FEATURE 4"
        },
        {
          "type": "textarea",
          "id": "feature4_desc",
          "label": "Feature 4 Description",
          "default": "Provide details about the fourth feature here. Explain the function, the advantage it gives, and why this feature sets the product apart from alternatives."
        },
        {
          "type": "image_picker",
          "id": "feature_icon_4",
          "label": "Feature 4 Icon"
        }
      ]
    },
    {
      "type": "effort_temperature",
      "name": "Effort & Temperature",
      "settings": [
        {
          "type": "text",
          "id": "effort_label",
          "label": "Effort Label",
          "default": "Effort"
        },
        {
          "type": "text",
          "id": "effort_desc",
          "label": "Effort Description",
          "default": "This product was designed for any and every run."
        },
        {
          "type": "text",
          "id": "temperature_label",
          "label": "Temperature Label",
          "default": "Temperature"
        },
        {
          "type": "text",
          "id": "temperature_desc",
          "label": "Temperature Description",
          "default": "Designed for cool to hot temperatures."
        },
        {
          "type": "text",
          "id": "effort_scale_0",
          "label": "Effort Scale: 1",
          "default": "0%"
        },
        {
          "type": "text",
          "id": "effort_scale_25",
          "label": "Effort Scale: 2",
          "default": "25%"
        },
        {
          "type": "text",
          "id": "effort_scale_50",
          "label": "Effort Scale: 3",
          "default": "50%"
        },
        {
          "type": "text",
          "id": "effort_scale_75",
          "label": "Effort Scale: 4",
          "default": "75%"
        },
        {
          "type": "text",
          "id": "effort_scale_100",
          "label": "Effort Scale: 5",
          "default": "100%"
        },
        {
          "type": "text",
          "id": "temp_scale_0",
          "label": "Temperature Scale: 1",
          "default": "0°"
        },
        {
          "type": "text",
          "id": "temp_scale_32",
          "label": "Temperature Scale: 2",
          "default": "32°"
        },
        {
          "type": "text",
          "id": "temp_scale_50",
          "label": "Temperature Scale: 3",
          "default": "50°"
        },
        {
          "type": "text",
          "id": "temp_scale_70",
          "label": "Temperature Scale: 4",
          "default": "70°"
        },
        {
          "type": "text",
          "id": "temp_scale_85",
          "label": "Temperature Scale: 5",
          "default": "85°"
        },
        {
          "type": "text",
          "id": "temp_scale_95",
          "label": "Temperature Scale: 6",
          "default": "95°"
        }
      ]
    },
    {
      "type": "materials",
      "name": "Materials",
      "settings": [
        {
          "type": "text",
          "id": "materials_label",
          "label": "Materials Label",
          "default": "Materials"
        },
        {
          "type": "text",
          "id": "materials_value",
          "label": "Materials Value (default)",
          "default": "83% M.Poly FD, 17% Spandex"
        }
      ]
    },
    {
      "type": "care",
      "name": "Care Instructions",
      "settings": [
        {
          "type": "text",
          "id": "care_label",
          "label": "Care Label",
          "default": "Care"
        },
        {
          "type": "textarea",
          "id": "care_value",
          "label": "Care Value (default, use \\n for new lines)",
          "default": "Machine Wash Cold\\nWash with Like Colors\\nDo Not Bleach\\nLay Flat to Dry\\nDo Not Iron\\nDo Not Dry Clean"
        }
      ]
    },
    {
      "type": "additional_info",
      "name": "Additional Info",
      "settings": [
        {
          "type": "textarea",
          "id": "additional_info",
          "label": "Additional Info (HTML allowed)",
          "default": "For best outcome, wash exclusively with active apparel.<br>Garment made in China"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Tech Specs",
      "blocks": [
        {
          "type": "fit_pocketing"
        },
        {
          "type": "functionality"
        },
        {
          "type": "effort_temperature"
        },
        {
          "type": "materials"
        },
        {
          "type": "care"
        },
        {
          "type": "additional_info"
        }
      ]
    }
  ]
}
{% endschema %}
