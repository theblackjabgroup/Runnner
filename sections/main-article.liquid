<section
  id="parallax-section"
  class="section1 color-{{ section.settings.color_scheme }} relative overflow-hidden items-start"
  style="min-height: 100vh;">
  <div class="parallax-container relative" style="min-height: 171vh; padding-left:{{ settings.side_space }}px; padding:right:{{ settings.side_space }}px;">
    <div class="overlay-placeholder" style="height: 100vh;"></div>
    <div
      class="overlay-content-container"
      style="position: relative; height: 100vh;"    >
      <div class="overlay-content max-w-7xl flex flex-col"
        id="overlayContent"
        style="position: fixed; top: 12.8vh;"      >
        {% if section.settings.show_date %}
          <div class="ml-4 show_date" style="margin-bottom:2.7vh; font-size:3.3vh; margin-top:2.7vh;">
            {{ article.published_at | date: '%m.%d.%y' }}
          </div>
        {% endif %}
        <div class="textdiv flex flex-row items-start px-2" style="width:66vw;">
          <div
            class="font-medium uppercase leading-none tracking-tighter text-left"
            style="font-size: clamp(4.8rem, 12vw, 7.85vw); line-height: 0.8; color: {{ section.settings.color_scheme }};"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="arrow-svg1"
              id="arrow-svg1"
              viewBox="0 0 9 9"
              stroke-width="1.3"
              stroke-linecap="round"
              stroke-linejoin="round"
              style="fill:none;margin-right: 10px;margin-left: 20px;height: 5.55vw; width:5.7vw; display:inline-block; margin-bottom:10px;"
            >
              <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261"></path>
            </svg>
            <span class="animated-text" style="word-break: break-word; white-space: normal;">
              {{ article.title }}
            </span>
          </div>
        </div>
      </div>
    </div>
    {% if article.image %}
    <div
      id="parallaxImage"
      class="parallax-image-overlay px-6 mb-10"
      style="height: 112.4vh; width:54.5vw; padding-right:{{ settings.side_space }}px;"
    >
      {{ article.image | image_url: width: 1200 | image_tag: class: 'blog-main-image', alt: article.image.alt, loading: 'eager' }}
    </div>
    {% endif %}
  </div>
</section>
<div
  class="blog-article-container color-{{ section.settings.color_scheme }} {% unless article.image %}no-image{% endunless %}"
  style="margin-top: 40px; padding-left:{{ settings.side_space}}px; padding-right:{{ settings.side_space }}px;"
>
  {% if section.settings.show_blog_section %}
  <div
    class="blog-article-content {% unless article.image %}centered-content{% endunless %}"
    style="color: rgb(var(--color-text));"
  >
      <div class="blog-article-header" style="color: rgb(var(--color-text));">
      <hr
        class="hrline dynamic-hr w-screen max-w-none mx-auto"
        style="border-top: 1px solid var(--text); margin-bottom: 0px;margin-top: 0px;"
      >
      <h3
        class="section-2-header uppercase font-medium tracking-tight color-{{ section.settings.color_scheme }}"
         style="margin-left: 13px; font-size:4.35vh; padding-top:2.7vh; padding-bottom:2.7vh;"
      >
        {{ section.settings.full_text }}
      </h3>
      <hr
        class="hrline1 w-screen max-w-none mx-auto"
        style="border-top: 1px solid var(--text); margin-bottom: 0px; margin-top:0px;"
      >
    </div>

    <div class="maintext flex flex-row" style="margin-top:20px;font-size:2.6vh;">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="arrow-svg12"
        viewBox="0 0 14 14"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        style="fill:none;
  height: 29px ;
  width: 30px;
  margin-top:25px;"
      >
        <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261"></path>
      </svg>

      <div
  class="blog-article-section font-normal color-{{ section.settings.color_scheme }}"
  style="margin-left: 13%; margin-right: 25%; line-height: clamp(1.2, 1.3, 1.4); width:55.6vw;"
>

        {{ article.content }}
      </div>
    </div>
  </div>
  {% endif %}
</div>
<hr class="hrline w-screen max-w-none mx-auto" style="border-top: 1px solid var(--text);margin-bottom:0px; margin-top:50px;margin-left:{{ settings.side_space}}px; margin-right:{{ settings.side_space }}px;">
<div class="social-section" style="font-weight:500; height: 7.8vh; padding-left:{{ settings.side_space}}px; padding-right:{{ settings.side_space }}px;">
  <div class="social-media color-{{ section.settings.color_scheme }} items-center " style="padding:20px; font-size:16px;height: 7.8vh;">
    <span class="sharebtn text-xl md:text-2xl text-black items-center;" style="margin-right:261px; margin-top:0.7vw">SHARE</span>

    {% if settings.social_facebook_link != blank %}
        <a href="{{ settings.social_facebook_link }}" target="_blank" rel="noopener" aria-label="Facebook" class="fb text-xl md:text-2xl text-black" style="margin-right:40px;">
        FACEBOOK
      </a>
    {% endif %}

    {% if settings.social_twitter_link != blank %}
       <a href="{{settings.social_twitter_link }}" target="_blank" rel="noopener" aria-label="Twitter" class="tw text-xl md:text-2xl text-black" style="margin-right:40px;">
        TWITTER
      </a>
    {% endif %}

    {% if settings.social_email_link != blank %}
      <a href="{{ settings.social_email_link }}" class="em text-xl md:text-2xl text-black" aria-label="Email" style="margin-right:40px;">
        EMAIL
      </a>
    {% endif %}

    {% if settings.social_linkedin_link != blank %}
       <a href="{{ settings.social_linkedin_link }}" target="_blank" rel="noopener" aria-label="LinkedIn" class="linked text-xl md:text-2xl text-black" style="margin-right:40px;">
        LINKEDIN
      </a>
    {% endif %}
  </div>
</div>
<hr class="hrline1 w-screen max-w-none mx-auto" style="border-top: 1px solid var(--text);margin:0px;margin-left:{{ settings.side_space}}px; margin-right:{{ settings.side_space }}px;">
<div class="color-{{ section.settings.color_scheme }}" style="padding-left:{{ settings.side_space}}px; padding-right:{{ settings.side_space }}px; padding-bottom:{{ settings.sections_spacing }}px">
  <div class="w-full uppercase">
    <div class="mainhead flex flex-col md:flex-row md:items-start" style="margin-top:6.9vh;">
      <div style="width:26vw; margin-right:0.65vw;"> 
        <h1 class="blog_heading-highlight" style="font-weight:500; font-size:42px; line-height:0.9; margin-bottom:20px;">
          {{ section.settings.main_heading }}
        </h1>
      </div>
      <div class="blog-grid w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10">
        {% assign default_blog_handle = 'news' %} 
        {% assign blog_handle = section.settings.selected_blog | default: default_blog_handle %}
        {% assign blog = blogs[blog_handle] %}
        {% assign articles_limit = section.settings.articles_per_page %}

        {% for article in blog.articles limit: articles_limit %}
          <a href="{{ article.url }}" class="blog-article block space-y-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg">
            <div class="zoom-trigger">
              <div class="aspect-[5/3] overflow-hidden">
                {% if article.image != blank %}
                  <img
                    src="{{ article.image | image_url: width: 600 }}"
                    width="{{ article.image.width }}"
                    height="{{ article.image.height }}"
                    alt="{{ article.title | default: 'Blog image' | escape }}"
                    loading="lazy"
                    class="w-full h-full object-cover transition-transform duration-300 ease-in-out"
                    style="transform-origin: center center;"
                  />
                {% else %}
                  {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray' }}
                {% endif %}
              </div>
              <div>
                <p class="text-[20px] mt-5 text-article-date-color font-medium" style="margin-bottom:2.7vh;margin-top:2.7vh;">
                  {{ article.published_at | date: "%m.%d.%y" }}
                </p>
                <h3 class="subclass-header" id="article-title-{{ forloop.index0 }}" style="line-height:0.9;">
                  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 10 10" class="arrow-svgsub inline-block"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.4">
                    <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261" stroke-linejoin="round"/>
                  </svg>
                  {{ article.title }}
                </h3>
                <span class="subclass-subheader text-[20px] font-medium tracking-tight" style="line-height:0.9;">
                  {{ article.content | strip_html | truncate: 50,"" }}
                </span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
</section>
<style>
.blog-article-section iframe,
.blog-article-section video {
  width: 65.5vw;
  height:76.1vh;
  object-fit: cover;
}
 .blog-article-section img{
   width: 100%;
  max-width: 100%;
  object-fit: cover;
}
  p, h1, h2, h3, h4, h5, h6,div {
  padding: 0;
  line-height: 1.3;
}

 span {
  padding: 0;
}

  .blog-article-section p,img {
  margin-bottom: 20px;
  margin-top:20px;
}

  @keyframes fadeInUpImage {
    0% {
      opacity: 0;
      transform: translateY(40px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .blog-grid {
    display: grid;
    gap: 1.3vw;
    grid-template-columns: 1fr;
  }

  @media (min-width: 768px) {
    .blog-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .blog-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .blog-article {
    width: 100%;
  }

  .subclass-header,
  .subclass-subheader,
  .blog_highlight-tag,
  .blog_heading-highlight,
  .text-article-date-color {
    color: var(--text);
  }

  .zoom-trigger:hover img {
    transform: scale(1.1);
    transition: transform 0.3s;
  }

  .blog-main-image {
    opacity: 0;
    transform: translateY(40px);
    animation: fadeInUpImage 1.2s ease-out forwards;
    animation-delay: 0.2s;
    
  }

  .blog-article-section {
    color: var(--text);
  }

  :root {
    --font-heading-family: {{ settings.type_heading_font.family }}, sans-serif;
    --font-body-family: {{ settings.type_body_font.family }}, sans-serif;
  }

  * {
    box-sizing: border-box;
  }

  #animated-heading {
    font-family: var(--font-heading-family);
  }

  .overlay-content {
    color: var(--header_text);
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
    will-change: transform, position;
    transition: all 0.1s ease-out;
  }

  .main_heading {
    color: var(--header_text);
  }
.letter {
  display: inline-block;
  opacity: 0;
  transform: translateX(100vw);
  animation: slideInFromExtremeRight 0.5s forwards;
  animation-timing-function: ease-out;
}

@keyframes slideInFromExtremeRight {
  0% {
    opacity: 0;
    transform: translateX(100vw); 
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}
  .show_date,
  .card-excerpt {
    font-family: var(--font-body-family);
    opacity: 0;
    animation: fadeIn 1s ease-in-out forwards;
  }
  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes fadeUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .parallax-image-overlay {
    overflow: hidden;
    position: absolute;
    right: 0;
    height: 57%;
    width: 50vw;
    z-index: 2;
    pointer-events: none;
    margin-bottom: -10px;
  }

  .parallax-image-overlay img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    will-change: transform;
    transition: transform 0.1s ease-out;
  }

  .fade-up {
    animation: fadeUp 2.0s ease-out forwards;
  }

  .section-2-header {
    color: var(--text);
  }

  hr {
    border: none;
    border-top: 2px solid var(--text);
  }

  .arrow-svg12 {
    fill: none;
    flex-shrink: 0;
    stroke: var(--text);
  }

  .card-excerpt {
    margin-left: 150px;
  }

  .arrow-svg1 {
    fill: none;
    margin-left: -38px;
    flex-shrink: 0;
    stroke: var(--header_text);
  }

  .fade-in-up {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .fade-in-up.active {
    opacity: 1;
    transform: translateY(0);
  }

  ::selection {
    color: #f97316;
  }

  .overlay-placeholder {
    display: block;
    width: 100%;
    visibility: hidden;
    pointer-events: none;
  }

  .animated-text {
    will-change: transform, opacity;
    backface-visibility: hidden;
    transform: translateZ(0);
    position: relative;
    z-index: 1;
  }

  .date-tag {
    font-family: var(--font-heading-family);
    opacity: 0;
    animation: fadeIn 1s ease-in-out forwards;
  }

  .excerpt {
    font-family: var(--font-heading-family);
  }

  @media (max-width: 768px) {
    .textdiv{
    width:79vw !important;
  }
    .overlay-content-container{
    height:106vh !important;
  }
    .blog-article-section iframe,
.blog-article-section video {
  width:100% !important;
}
    .blog-article-section img{
    height:205px;
  width:356px;
}

  .blog-article-section p,img {
  margin-bottom: 0px !important;
  margin-top:0px !important;
}
    .mainhead{
    margin-top:0px !important;
  }
    .fb,.linked,.tw,.em{
    margin-right:20px !important;
  }
    .arrow-svgsub{
      height:16px;
      width:17px;
    }
    .blog-article-section video,
    .blog-article-section iframe{
  height: auto;
  aspect-ratio: 16 / 9;
}

    .maintext{
      margin-top:0vh !important;
    }
     .subclass-header {
      font-size: 24px !important;
      margin-bottom:10px !important;
    }
    .subclass-subheader {
      display:block;
      font-size: 16px !important;
      line-height: 1.1 !important;
      padding-bottom:35px !important;
    }
     .subclass-subheader.no-padding-bottom {
    padding-bottom: 0px !important;
  }
    .social{
      padding-top:20px;
      padding-bottom:20px;
      height:11.7vh !important;
    }
    .sharebtn{
      margin-top:0px !important;
      margin-right:0px !important;
      display:block;
      margin-bottom:10px !important;
    }
    .text-article-date-color{
      font-size:16px !important;
      margin-top:10px !important;
      margin-bottom:20px !important;
    }
    .section-2-header {
      margin-left:0px !important;
      font-size: 24px !important;
      line-height:1 !important;
      padding-top:3.1vh !important;
      padding-bottom:3.1vh !important;
    }
    .hrline{
    margin-top:20px !important;
  }
    .blog-grid {
      margin-top: 0px !important;
      margin-left: 0px !important;
    }
    .blog-article{
      padding-right:0px !important;
    }

    .blog_heading-highlight {
      font-size: 24px !important;
      margin-bottom: 20px !important;
      margin-top: 50px !important;
      width:102.5vw;
    }


    .parallax-image-overlay {
    position: absolute !important;
    width: 70% !important;
    height: 280px !important;
    max-height: 50vh;
    z-index: 2;
    pointer-events: none;
  }
.parallax-image-overlay img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  will-change: transform;
  transition: transform 0.1s ease-out;
}

    .section1 {
      min-height: 90vh !important;
    }

    .overlay-content {
      margin-top: 0px !important;
      padding: 0 10px !important;
    }

    .card-excerpt {
      margin-left: 25px !important;
    }

    #animated-heading {
      font-size: 2rem !important;
      width: 70vw !important;
    }

    #arrow-svg1 {
      height: 0.7em !important;
      width: 34px !important;
      margin-left: 0px !important;
      margin-bottom: 10px !important;
      margin-top: 6px !important;
    }

    .arrow-svg12 {
      display:none !important;
      margin-left: 0px !important;
      margin-top: 6px !important;
    }

    .main_heading {
      margin-left: -206px !important;
    }

    .show_date {
      font-size: 1.6rem !important;
      margin-left: 0.5rem !important;
      margin-bottom:3.2vh !important;
      margin-top:8px !important;
    }

    .blog-article-container {
      margin-top: 20px !important;
    }

    .blog-article-header {
      margin-top: 20px !important;
    }

    .overlay-content.mobile-fixed {
      position: fixed !important;
      top: 55px !important;
      left: 0 !important;
      width: 100vw !important;
      z-index: 1 !important;
      padding: 0 10px !important;
      max-width: 100vw !important;
    }

    .overlay-content.mobile-absolute {
      position: absolute !important;
      left: 0 !important;
      width: 100vw !important;
      z-index: 1 !important;
      background: transparent !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }

    .blog-article-section {
      width: 100% !important;
      margin: 0 auto !important;
      line-height: 1.3;
      margin-top: 3px !important;
      margin-bottom: 20px;
    }

    .animated-text {
      line-height: 1 !important;
    }
    .social-section{
      height:12.3vh !important;
      width:100vw !important;
    }
    .social-media {
      height:79px;
      padding-top: 20px !important;
      padding-bottom:20px !important;
      padding-left:0px !important;
      padding-right:0px !important;
      font-size: 13px !important;
      
    }

    body {
      overflow-x: hidden;
    }

    .section1,
    .parallax-container {
      overflow-x: hidden;
      min-height: 90vh !important;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    .parallax-image-overlay {
      width: 60vw !important;
      height: 50% !important;
    }

    .overlay-content {
      padding: 0 20px !important;
    }

    .blog-article-section {
      width: 70% !important;
    }
  }

  @media (prefers-reduced-motion: no-preference) {
    .overlay-content {
      backface-visibility: hidden;
      transform: translateZ(0);
    }
  }
  .subclass-header{
    font-size:32px;
    margin-bottom:20px;
  }
  @media (max-width: 768px) {
  .parallax-image-overlay {
    width: 61vw !important;
    height: clamp(270px, 40vh, 340px) !important;
    z-index: 2;
    pointer-events: none;
    left:33vw;
  }

  .parallax-image-overlay img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    will-change: transform;
    transition: transform 0.1s ease-out;
  }
}
  @media (max-width: 768px) {
    #parallaxImage {
      width: 61vw !important;
      height: auto !important;
      padding-right: 0 !important;
      object-fit: contain !important;
      display: block !important;
      max-width: 100% !important;
    }
    #parallaxImage img {
      width: 100% !important;
      height: auto !important;
      object-fit: contain !important;
      display: block !important;
    }
  }
  .letter {
    display: inline-block;
    opacity: 0;
    transform: translateX(100vw);
    animation: slideInFromExtremeRight 0.5s forwards;
    animation-timing-function: ease-out;
  }

  @keyframes slideInFromExtremeRight {
    0% {
      opacity: 0;
      transform: translateX(100vw);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }
  #overlayContent {
  transition: top 0.000001s ease-out;
  will-change: top;
}

</style>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const text = document.getElementById("overlayContent");
  const image = document.getElementById("parallaxImage");
  const fixedTopPx = 0.128 * window.innerHeight;
  const buffer = 2;
  let isPinned = true;

 const adjustImageTop = () => {
  const isMobile = window.innerWidth <= 768;

  if (isMobile) {
    const overlayRect = text.getBoundingClientRect();
    const scrollTop = window.scrollY;
    const imageTop = scrollTop + overlayRect.height + 20;

    image.style.position = 'absolute';
    image.style.top = `${imageTop}px`;
  } else {
    const overlayRect = text.getBoundingClientRect();
    const scrollTop = window.scrollY;
    const imageTop = scrollTop + text.offsetHeight + 50;

    image.style.position = 'absolute';
    image.style.top = `${imageTop}px`;
  }
};

const updatePosition = () => {
  const scrollTop = window.scrollY;
  const imageRect = image.getBoundingClientRect();
  const textHeight = text.offsetHeight;
  const textBottomInView = fixedTopPx + textHeight;
  const isMobile = window.innerWidth <= 768;

  const imageBottomY = imageRect.bottom;
 const imageMiddleY = imageRect.top + imageRect.height * 0.62; 
  const triggerY = isMobile ? imageBottomY : imageMiddleY;

  if (triggerY <= textBottomInView) {
    text.style.position = "absolute";
    text.style.top = `${scrollTop + triggerY - textHeight}px`;
    text.style.transform = "none";

    if (isMobile) {
      image.style.position = "relative";
      image.style.height = `${image.offsetHeight}px`; 
    }
  } else {
    text.style.position = "fixed";
    text.style.top = `${fixedTopPx}px`;

    const delta = triggerY - textBottomInView;
    const offset = Math.max(0, Math.min(15, -delta));
    text.style.transform = offset > 1 ? `translateY(${offset}px)` : "translateY(0px)";

    if (isMobile) {
      image.style.position = "absolute";
      image.style.height = "min(70vw, 340px)";

    }
  }
};
const animatedTextContainer = document.querySelector(".animated-text");
const rawText = animatedTextContainer.textContent.trim();
animatedTextContainer.textContent = "";

const words = rawText.split(" ");

let delay = 0;
words.forEach((word, wordIndex) => {
  [...word].forEach((char) => {
    const span = document.createElement("span");
    span.classList.add("letter");
    span.textContent = char;
    span.style.display = "inline-block";
    span.style.animationDelay = `${delay}s`;
    delay += 0.05; 
    animatedTextContainer.appendChild(span);
  });
  const spaceSpan = document.createElement("span");
  spaceSpan.style.display = "inline-block";
  spaceSpan.style.width = "0.3em";
  animatedTextContainer.appendChild(spaceSpan);
});
  adjustImageTop();
  updatePosition();

  window.addEventListener("resize", () => {
    adjustImageTop();
    updatePosition();
  });

  window.addEventListener("scroll", () => requestAnimationFrame(updatePosition));
});
</script>
{% schema %}
{
  "name": "Blog Article",
  "settings": [
    {
  "type": "checkbox",
  "id": "show_blog_section",
  "label": "Show Blog Section",
  "default": true
},
    {
      "type": "text",
      "id": "full_text",
      "label": "Full Heading Text",
      "default": "The Bandit x ASICS Novablast 5 Campaign"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show Article Date",
      "default": true
    },
     {
      "type": "text",
      "id": "main_heading",
      "label": "Main Heading",
      "default": "Related Articles"
    }

  ]
}
{% endschema %}
