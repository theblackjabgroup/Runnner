<script src="{{ 'blog-edit.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Default Blog Posts",
  "settings": [
    {
      "type": "text",
      "id": "full_text",
      "label": "Full Heading Text",
      "default": "The Bandit x ASICS Novablast 5 Campaign"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show Article Date",
      "default": true
    },
     {
      "type": "text",
      "id": "main_heading",
      "label": "Main Heading",
      "default": "Related Articles"
    }
  ]
}
{% endschema %}

<style>
  /* Mobile Animation Styles */
.mobile-fade-in {
  opacity: 0;
  transform: translateY(50px) scale(0.95);
  transition: opacity 1.2s ease-out, transform 1.2s ease-out;
}

.mobile-fade-in.mobile-active {
  opacity: 1;
  transform: translateY(0) scale(1);
}

/* Desktop Animation Styles */
.desktop-fade-in {
  opacity: 0;
  transform: translateY(40px) rotateX(10deg);
  transition: opacity 0.8s ease-out, transform 0.8s ease-out;
}

.desktop-fade-in.desktop-active {
  opacity: 1;
  transform: translateY(0) rotateX(0deg);
}

/* Remove the old fade-in-up class to avoid conflicts */
.fade-in-up {
  /* This class is now replaced by mobile/desktop specific classes */
}
    :root {
      --font-heading-family: {{ settings.type_heading_font.family }}, sans-serif;
      --font-body-family: {{ settings.type_body_font.family }}, sans-serif;
    }
    :focus {
    outline: 2px solid #f97316;
    outline-offset: 2px;
  }
  .subclass-header,
.subclass-subheader,
.blog_highlight-tag,
.blog_heading-highlight,
.text-article-date-color {
  color: var(--text);
}
  .arrow-svgsub{
    stroke: var(--text);
    fill: var(--text);
    margin-top: -6px;
    margin-right: 5px;
  }
 ::selection{
   color:orange;
 }
  .subclass-header{
    font-size:28px;
  }
  .subclass-subheader{
    margin-top:15px;
    line-height:0.9
  }
  .group:hover img {
    transform: scale(1.1);
    transition: transform 0.3s;
  }
  .zoom-trigger:hover img {
    transform: scale(1.1);
    transition: transform 0.3s;
  }
  
  .blog-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    margin-left: -0.5rem;
    margin-right: -0.5rem;
  }
  
  .blog-article {
    flex: 0 0 calc(33.333% - 1rem);
    max-width: calc(33.333% - 1rem);
  },
    #animated-heading {
      font-family: var(--font-heading-family);
    }
    .overlay-content{
      color : var(--header_text);
    }
    .main_heading{
      color : var(--header_text);
    }
    .letter {
      display: inline-block;
      opacity: 0;
      transform: translateX(100vw);
      animation: slideInLetter 0.8s forwards;
    }

    @keyframes slideInLetter {
      0% {
        opacity: 0;
        transform: translateX(100vw);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .show_date, .card-excerpt {
      font-family: var(--font-body-family);
      opacity: 0;
      animation: fadeIn 1s ease-in-out forwards;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .parallax-image-overlay {
    overflow: hidden;
    position: absolute;
    top: 0;
    right: 0;
    height: 58%;
    width: 50vw;
    z-index: 20;
    pointer-events: none;
    margin-top: 430px;
    margin-bottom: -10px;
  }
  .parallax-image-overlay img {
    will-change: transform;
    transition: transform 0.2s linear;
  }


    @media (max-width: 768px) {
.subclass-header {
      margin-bottom: 0.5rem;
    }
    .subclass-header{
      font-size: 21px !important;
    }
    .subclass-subheader {
      margin-top: 0.625rem;
      font-size: 13px !important;
      line-height:0.1;
    }
    .blog_heading-highlight{
      font-size:24px !important;
      margin-bottom:30px;
    }
    .text-article-date-color{
      font-size:13px;
    }
    .arrow-svgsub{
      height:10px;
      width:10px;
      margin-top:-3px!important;
    }
       .blog-article {
      flex: 0 0 100%;
      max-width: 100%;
    },
      .sharebtn{
        margin-right:0px !important;
      }
       .card-excerpt {
        margin-left: 25px !important;
      }

      .overlay-content {
        margin-top: 20px !important;
      }

      #animated-heading {
        font-size: 2rem !important;
        width: 70vw !important;
      }

      #arrow-svg1,
      .arrow-svg12 {
        height: 38px !important;
        width: 44px !important;
        margin-left: 0px !important;
        margin-top: 6px !important;
      }

      .main_heading {
  text-align: center;
  margin-left: 0 !important;
}
      .parallax-image-overlay img {
  max-width: 93%;
  height: auto;
  max-height: 230px;
  display: block;
  margin: 0 auto;
}

      .parallax-image-overlay {
        position: relative;
        width: 75%;
        margin-top: 0px !important;
        transform: none;
        z-index: 10;
        height:50% !important;
        padding-top: 30px;
        margin-left:90px;
      }

      .section1 {
        min-height: 0vh !important;
      }
      .parallax-container{
        min-height:63vh !important;
      }
    }

    .fade-up {
      animation: fadeUp 2.0s ease-out forwards;
    }

    .blog-article-section {
      color: var(--text);
    }

    .section-2-header {
      color: var(--text);
    }

    hr {
      border: none;
      border-top: 2px solid var(--text);
      margin: 20px 0;
    }

    .arrow-svg12 {
      fill: none;
      margin-left: -38px;
      flex-shrink: 0;
      stroke: var(--text);
    }

    .overlay-content {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
    }
    ::selection {
      color: #f97316;
    }

   .card-excerpt {
  margin: 0 auto;
  padding: 0 1rem;
}

    .arrow-svg1 {
      fill: none;
      margin-left: -38px;
      flex-shrink: 0;
      stroke: var(--header_text);
    }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const parallaxImage = document.querySelector('.parallax-image-overlay img');
    const overlay = document.querySelector('.overlay-content');
    const container = document.querySelector('.parallax-container');
    const OFFSET_TOP = 55;
    const isMobile = window.innerWidth <= 768;
    function initMobileAnimation() {
      if (parallaxImage) {
        parallaxImage.classList.add('mobile-fade-in');
        
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('mobile-active');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.3 });

        observer.observe(parallaxImage);
      }
      if (overlay) {
        overlay.style.position = 'relative';
        overlay.style.top = '';
        overlay.style.left = '';
        overlay.style.width = '';
      }
    }
    function initDesktopAnimation() {
      if (parallaxImage) {
        parallaxImage.classList.add('desktop-fade-in');

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('desktop-active');
              observer.unobserve(entry.target);
            }
          });
        }, { threshold: 0.2 });

        observer.observe(parallaxImage);
      }
      function onScroll() {
        if (!parallaxImage || !overlay || !container) return;

        const containerRect = container.getBoundingClientRect();
        const overlayHeight = overlay.offsetHeight;
        const stopPoint = containerRect.bottom - overlayHeight - OFFSET_TOP;

        if (containerRect.top <= OFFSET_TOP && stopPoint > OFFSET_TOP) {
          overlay.style.position = 'fixed';
          overlay.style.top = `${OFFSET_TOP}px`;
          overlay.style.left = `${containerRect.left}px`;
          overlay.style.width = `${containerRect.width}px`;
        } else if (stopPoint <= OFFSET_TOP) {
          overlay.style.position = 'absolute';
          overlay.style.top = `${container.offsetHeight - overlayHeight}px`;
          overlay.style.left = '';
          overlay.style.width = '';
        } else {
          overlay.style.position = 'relative';
          overlay.style.top = '';
          overlay.style.left = '';
          overlay.style.width = '';
        }
      }

      window.addEventListener('scroll', onScroll);
      window.addEventListener('resize', () => {
        const newIsMobile = window.innerWidth <= 768;
        if (newIsMobile !== isMobile) {
          location.reload();
        } else {
          onScroll();
        }
      });
      
      onScroll();
    }
    if (isMobile) {
      initMobileAnimation();
    } else {
      initDesktopAnimation();
    }
  });
</script>

<section
  id="parallax-section"
  class="section1 color-{{ section.settings.color_scheme }} relative overflow-hidden items-start"
  style="min-height: 160vh;"
>
  <div class="parallax-container relative" style="min-height: 140vh;">
    <div class="overlay-content max-w-7xl relative flex flex-col" style="margin-top:55px;">
      {% if section.settings.show_date %}
        <div class="ml-4 text-4xl show_date">{{ article.published_at | date: '%m.%d.%y' }} &nbsp;&nbsp;</div>
      {% endif %}

      <div class="flex flex-row items-start">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="arrow-svg1"
          id="arrow-svg1"
          viewBox="0 0 9 9"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          style="fill:none;margin-top: 13px;margin-right: 35px;margin-left: 20px;height: 71px;"
        >
          <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261"></path>
        </svg>
        <div
          class="font-medium uppercase leading-none tracking-tighter text-left md:w-[20vw] w-[50vw]"
          style="font-size: clamp(2rem, 8vw, 12rem); word-break: keep-all; overflow-wrap: break-word; line-height: 0.8; color: {{ section.settings.color_scheme }};"
        >
          {{ article.title }}
        </div>
      </div>
    </div>
    {% if article.image %}
      <div class="parallax-image-overlay px-6 mb-10 " style="margin-top:550px;">
        {{
          article.image
          | image_url: width: 1200
          | image_tag: class: 'blog-main-image', alt: article.image.alt
          | escape
        }}
      </div>
    {% endif %}
  </div>
</section>

<div
  class="blog-article-container color-{{ section.settings.color_scheme }} {% unless article.image %}no-image{% endunless %}"
  style="margin-top:-70px;"
>
  <div
    class="blog-article-content {% unless article.image %}centered-content{% endunless %}"
    style="color: rgb(var(--color-text));"
  >
    <div class="blog-article-header" style="color: rgb(var(--color-text)); margin-top:70px;">
      <hr
        class="hrline w-screen max-w-none mx-auto"
        style="border-top: 2px solid var(--text); margin-bottom:14px; margin-left:13px;"
      >

      <h3
        class="section-2-header uppercase font-medium tracking-tight color-{{ section.settings.color_scheme }}"
        style="margin-left:13px;"
      >
        {{ section.settings.full_text }}
      </h3>

      <hr
        class="hrline w-screen max-w-none mx-auto"
        style="border-top: 2px solid var(--text); margin-bottom:14px; margin-left:13px;"
      >
    </div>

    <div class="flex flex-row">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="arrow-svg12 w-9 h-8 md:mt-[20px] mt-[10px] sm:w-16 sm:h-18 md:w-20 md:h-44 lg:w-44 lg:h-28"
        viewBox="0 0 14 14"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        style="fill:none; margin-top:7px; margin-left:-6px;"
      >
        <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261"></path>
      </svg>

      <div
        class="blog-article-section w-1/2 mx-auto text-center text-left color-{{ section.settings.color_scheme }}"
        style="margin-bottom:20px;"
      >
        {{ article.content }}
      </div>
    </div>
  </div>
</div>
<div class="border-t border-b border-black py-4">
  <div class="flex flex-col md:flex-row md:items-center md:space-x-10 px-4 space-y-4 md:space-y-0" style="color: var(--text);">
    <span class="sharebtn text-2xl" style="margin-right: 363px;">SHARE</span>

    {% if settings.social_facebook_link != blank %}
      <a href="{{ settings.social_facebook_link }}" target="_blank" rel="noopener" aria-label="Facebook" class="text-2xl" style="color: inherit;">
        FACEBOOK
      </a>
    {% endif %}

    {% if settings.social_twitter_link != blank %}
      <a href="{{ settings.social_twitter_link }}" target="_blank" rel="noopener" aria-label="Twitter" class="text-2xl" style="color: inherit;">
        TWITTER
      </a>
    {% endif %}

    {% if settings.social_email_link != blank %}
      <a href="{{ settings.social_email_link }}" class="text-2xl" aria-label="Email" style="color: inherit;">
        EMAIL
      </a>
    {% endif %}

    {% if settings.social_linkedin_link != blank %}
      <a href="{{ settings.social_linkedin_link }}" target="_blank" rel="noopener" aria-label="LinkedIn" class="text-2xl" style="color: inherit;">
        LINKEDIN
      </a>
    {% endif %}
  </div>
</div>

<section class="p-6 color-{{ section.settings.color_scheme }}">
  <div class="w-full uppercase">
    <div class="flex flex-col md:flex-row md:items-start gap-10">
      <div class="w-2/3 max-w-[300px]">
        <h1 class="mt-10 blog_heading-highlight" style="font-weight:500; font-size:35px;">{{ section.settings.main_heading }}</h1>
      </div>

      <div class="blog-grid w-full">
        {% assign default_blog_handle = 'news' %} 

{% assign blog_handle = section.settings.selected_blog | default: default_blog_handle %}
{% assign blog = blogs[blog_handle] %}
{% assign articles_limit = section.settings.articles_per_page %}

{% for article in blog.articles limit: articles_limit %}
  <a href="{{ article.url }}" class="blog-article block space-y-2 px-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg">
    <div class="zoom-trigger">
      <div class="aspect-[5/3] overflow-hidden">
        {% if article.image != blank %}
          <img
            src="{{ article.image | image_url: width: 600 }}"
            width="{{ article.image.width }}"
            height="{{ article.image.height }}"
            alt="{{ article.title | default: 'Blog image' | escape }}"
            loading="lazy"
            class="w-full h-full object-cover transition-transform duration-300 ease-in-out"
            style="transform-origin: center center;"
          />
        {% else %}
          {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray' }}
        {% endif %}
      </div>
      <div>
        <p class="text-sm md:text-[20px] mt-2 text-article-date-color">{{ article.published_at | date: "%m.%d.%y" }}</p>
         <h3 class="subclass-header" id="article-title-{{ forloop.index0 }}">
                  <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 9 9" class="arrow-svgsub inline-block"
                    stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261" stroke-linejoin="round"/>
            </svg>
                  {{ article.title }}
                </h3>
        <span class="subclass-subheader md:text-[19px] font-medium tracking-tight">
          {{ article.content | strip_html | truncate: 50,"" }}
        </span>
      </div>
    </div>
  </a>
{% endfor %}
      </div>
    </div>

    <hr class="w-screen max-w-none mx-auto my-8 border-t-0 border-solid" />
  </div>
                
</section>
<script type="application/ld+json">
  {{ article | structured_data }}
</script>
