<script src="{{ 'blog-edit.js' | asset_url }}" defer></script>

{% schema %}
{
  "name": "Default Blog Posts",
  "settings": [
    {
      "type": "text",
      "id": "full_text",
      "label": "Full Heading Text",
      "default": "The Bandit x ASICS Novablast 5 Campaign"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show Article Date",
      "default": true
    }
  ]
}
{% endschema %}

<style>
    :root {
      --font-heading-family: {{ settings.type_heading_font.family }}, sans-serif;
      --font-body-family: {{ settings.type_body_font.family }}, sans-serif;
    }

    #animated-heading {
      font-family: var(--font-heading-family);
    }
    .overlay-content{
      color : var(--header_text);
    }
    .main_heading{
      color : var(--header_text);
    }
    .letter {
      display: inline-block;
      opacity: 0;
      transform: translateX(100vw);
      animation: slideInLetter 0.8s forwards;
    }

    @keyframes slideInLetter {
      0% {
        opacity: 0;
        transform: translateX(100vw);
      }
      100% {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .show_date, .card-excerpt {
      font-family: var(--font-body-family);
      opacity: 0;
      animation: fadeIn 1s ease-in-out forwards;
    }

    @keyframes fadeIn {
      0% {
        opacity: 0;
        transform: translateY(10px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .parallax-image-overlay {
    overflow: hidden;
    position: absolute;
    top: 0;
    right: 0;
    height: 58%;
    width: 50vw;
    z-index: 20;
    pointer-events: none;
    margin-top: 430px;
    margin-bottom: -10px;
  }
  .parallax-image-overlay img {
    will-change: transform;
    transition: transform 0.2s linear;
  }


    @media (max-width: 768px) {
      .parallax-image-overlay {
        position: relative;
        width: 75%;
        margin: 0 auto;
        transform: none;
        z-index: 1;
        padding-top: 50px;
        margin-left:90px;
      }

      .section1 {
        min-height: 0vh !important;
      }
    }

    .fade-up {
      animation: fadeUp 2.0s ease-out forwards;
    }

    .blog-article-section {
      color: var(--text);
    }

    .section-2-header {
      color: var(--text);
    }

    hr {
      border: none;
      border-top: 2px solid var(--text);
      margin: 20px 0;
    }

    .arrow-svg12 {
      fill: none;
      margin-left: -38px;
      flex-shrink: 0;
      stroke: var(--text);
    }

    .overlay-content {
      margin-bottom: 0 !important;
      padding-bottom: 0 !important;
    }

    @media (max-width: 767px) {
      .card-excerpt {
        margin-left: 25px !important;
      }

      .overlay-content {
        margin-top: 20px !important;
      }

      #animated-heading {
        font-size: 2rem !important;
        width: 70vw !important;
      }

      #arrow-svg1,
      .arrow-svg12 {
        height: 38px !important;
        width: 44px !important;
        margin-left: 0px !important;
        margin-top: 6px !important;
      }

      .main_heading {
        margin-left: -206px !important;
      }
    }

    ::selection {
      color: #f97316;
    }

    .card-excerpt {
      margin-left: 150px;
    }
    .arrow-svg1 {
      fill: none;
      margin-left: -38px;
      flex-shrink: 0;
      stroke: var(--header_text);
    }
    .fade-in-up {
    opacity: 0;
    transform: translateY(40px);
    transition: opacity 0.8s ease-out, transform 0.8s ease-out;
  }

  .fade-in-up.active {
    opacity: 1;
    transform: translateY(0);
  }
</style>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const parallaxImage = document.querySelector('.parallax-image-overlay img');
    const overlay = document.querySelector('.overlay-content');
    const OFFSET_TOP = 55;

    // Add fade-in effect
    if (parallaxImage) {
      parallaxImage.classList.add('fade-in-up');
      // Trigger the animation a frame later to ensure it's animated
      requestAnimationFrame(() => {
        parallaxImage.classList.add('active');
      });
    }

    function onScroll() {
      if (!parallaxImage || !overlay) return;

      const container = document.querySelector('.parallax-container');
      const containerRect = container.getBoundingClientRect();
      const overlayHeight = overlay.offsetHeight;

      // The point where overlay should stop being fixed
      const stopPoint = containerRect.bottom - overlayHeight - OFFSET_TOP;

      if (containerRect.top <= OFFSET_TOP && stopPoint > OFFSET_TOP) {
        // Parallax/fixed
        overlay.style.position = 'fixed';
        overlay.style.top = `${OFFSET_TOP}px`;
        overlay.style.left = `${containerRect.left}px`;
        overlay.style.width = `${containerRect.width}px`;
      } else if (stopPoint <= OFFSET_TOP) {
        // Break out of parallax, scrolls normally
        overlay.style.position = 'absolute';
        overlay.style.top = `${container.offsetHeight - overlayHeight}px`;
        overlay.style.left = '';
        overlay.style.width = '';
      } else {
        // Initial state (before reaching parallax)
        overlay.style.position = 'relative';
        overlay.style.top = '';
        overlay.style.left = '';
        overlay.style.width = '';
      }
    }

    window.addEventListener('scroll', onScroll);
    window.addEventListener('resize', onScroll);
    onScroll();
  });
</script>
<section
  id="parallax-section"
  class="section1 color-{{ section.settings.color_scheme }} relative overflow-hidden items-start"
  style="min-height: 160vh;"
>
  <div class="parallax-container relative" style="min-height: 140vh;">
    <div class="overlay-content max-w-7xl relative flex flex-col" style="margin-top:55px;">
      {% if section.settings.show_date %}
        <div class="ml-4 text-4xl show_date">{{ article.published_at | date: '%m.%d.%y' }} &nbsp;&nbsp;</div>
      {% endif %}

      <div class="flex flex-row items-start">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="arrow-svg1"
          id="arrow-svg1"
          viewBox="0 0 9 9"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          style="fill:none;margin-top: 13px;margin-right: 35px;margin-left: 20px;height: 71px;"
        >
          <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261"></path>
        </svg>
        <div
          class="font-medium uppercase leading-none tracking-tighter text-left md:w-[20vw] w-[50vw]"
          style="font-size: clamp(2rem, 8vw, 12rem); word-break: keep-all; overflow-wrap: break-word; line-height: 0.8; color: {{ section.settings.color_scheme }};"
        >
          {{ article.title }}
        </div>
      </div>
    </div>
    {% if article.image %}
      <div class="parallax-image-overlay px-6 mb-10 " style="margin-top:550px;">
        {{
          article.image
          | image_url: width: 1200
          | image_tag: class: 'blog-main-image', alt: article.image.alt
          | escape
        }}
      </div>
    {% endif %}
  </div>
</section>

<div
  class="blog-article-container color-{{ section.settings.color_scheme }} {% unless article.image %}no-image{% endunless %}"
  style="margin-top:-70px;"
>
  <div
    class="blog-article-content {% unless article.image %}centered-content{% endunless %}"
    style="color: rgb(var(--color-text));"
  >
    <div class="blog-article-header" style="color: rgb(var(--color-text)); margin-top:70px;">
      <hr
        class="hrline w-screen max-w-none mx-auto"
        style="border-top: 2px solid var(--text); margin-bottom:14px; margin-left:13px;"
      >

      <h3
        class="section-2-header uppercase font-medium tracking-tight color-{{ section.settings.color_scheme }}"
        style="margin-left:13px;"
      >
        {{ section.settings.full_text }}
      </h3>

      <hr
        class="hrline w-screen max-w-none mx-auto"
        style="border-top: 2px solid var(--text); margin-bottom:14px; margin-left:13px;"
      >
    </div>

    <div class="flex flex-row">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="arrow-svg12 w-9 h-8 md:mt-[20px] mt-[10px] sm:w-16 sm:h-18 md:w-20 md:h-44 lg:w-44 lg:h-28"
        viewBox="0 0 14 14"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        style="fill:none; margin-top:7px; margin-left:-6px;"
      >
        <path d="M1.1875 7.7334H7.6599M7.6599 7.7334V1.261M7.6599 7.7334L1.1875 1.261"></path>
      </svg>

      <div
        class="blog-article-section w-1/2 mx-auto text-center text-left color-{{ section.settings.color_scheme }}"
        style="margin-bottom:20px;"
      >
        {{ article.content }}
      </div>
    </div>
  </div>
</div>

<script type="application/ld+json">
  {{ article | structured_data }}
</script>
