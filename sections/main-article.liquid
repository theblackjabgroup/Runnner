<link rel="stylesheet" href="{{ 'section-blog-post.css' | asset_url }}">
<script src="{{ 'main-article.js' | asset_url }}" defer></script>

<style>
  /* Main Article Fade-Up Animation */
  .article-content-animated {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .article-content-animated.animate {
    opacity: 1;
    transform: translateY(0);
  }

  .related-articles-animated {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .related-articles-animated.animate {
    opacity: 1;
    transform: translateY(0);
  }

  @media (min-width: 768px) {
    .sharebtn {
      margin-right: 100px !important;
    }
  }

  @media (min-width: 1024px) {
    .sharebtn {
      margin-right: 261px !important;
    }
  }

  @media (min-width: 768px) {
    .colordiv {
      padding-bottom: {{ section.settings.related_padding_desktop | default: 50 }}px !important;
    }
  }

  @media (max-width: 768px) {
    .overlay-content .flex {
      width: 95vw !important;
    }
  }
</style>
<section
  id="parallax-section"
  class="section1 color-{{ section.settings.color_scheme }} relative overflow-hidden items-start"
  style="min-height: 100vh;padding-right:{{ settings.side_space }}px;"
>
  <div
    class="parallax-container relative"
    style="min-height: 191.5vh; padding-left:{{ settings.side_space }}px; padding-right:{{ settings.side_space }}px;"
  >
    <div class="overlay-placeholder" style="height: 188vh;"></div>

    <div class="overlay-content max-w-7xl relative flex flex-col" style="margin-top: 1.8vh;">
      {% if section.settings.show_date %}
        <div
          class="ml-4 show_date"
          style="font-family: var(--font-body-family);margin-bottom:2.7vh; font-size:var(--t-b-1-size); font-weight:var(--t-b-1-weight); line-height:var(--t-b-1-line-height); margin-top:2.7vh;"
        >
          {{ article.published_at | date: '%m.%d.%y' }} &nbsp;&nbsp;
        </div>
      {% endif %}
      <div class="flex flex-row items-start px-2" style="width:100%; max-width:66vw;">
        <div
          class="font-medium uppercase leading-none tracking-tighter text-left"
          style="color: {{ section.settings.color_scheme }};"
        >
          <span
            class="animated-text"
            style="font-family: var(--font-heading-family);word-break: break-word; white-space: normal; font-size:var(--t-h-1-size); font-weight:var(--t-h-1-weight); line-height:var(--t-h-1-line-height);"
          >
            {{- article.title -}}
          </span>
        </div>
      </div>
    </div>
    {% if article.image %}
      <div
        class="parallax-image-overlay mb-10"
        style="height: 101.4vh; width:49vw; padding-right:{{ settings.side_space }}px;"
      >
        <img
          srcset="
            {%- if article.image.width >= 600 -%}{{ article.image | image_url: width: 600 }} 600w,{%- endif -%}
            {%- if article.image.width >= 1200 -%}{{ article.image | image_url: width: 1200 }} 1200w,{%- endif -%}
            {%- if article.image.width >= 1800 -%}{{ article.image | image_url: width: 1800 }} 1800w,{%- endif -%}
            {%- if article.image.width >= 2400 -%}{{ article.image | image_url: width: 2400 }} 2400w,{%- endif -%}
            {{ article.image | image_url }} {{ article.image.width }}w
          "
          sizes="(max-width: 768px) 100vw, 49vw"
          src="{{ article.image | image_url: width: 1200 }}"
          alt="{{ article.image.alt | escape | default: article.title | default: 'Article featured image' }}"
          width="{{ article.image.width }}"
          height="{{ article.image.height }}"
          loading="eager"
          class="blog-main-image"
        >
      </div>
    {% endif %}
  </div>
</section>
<div
  class="blog-article-container color-{{ section.settings.color_scheme }} {% unless article.image %}no-image{% endunless %} article-content-animated"
  style="padding-left:{{ settings.side_space}}px; padding-right:{{ settings.side_space }}px; "
>
  {% if section.settings.show_blog_section %}
    <div
      class="blog-article-content {% unless article.image %}centered-content{% endunless %}"
      style="color: rgb(var(--color-text)); margin-top:20px;"
    >
      <div class="blog-article-header" style="color: rgb(var(--color-text));">
        <hr
          class="hrline w-screen max-w-none mx-auto"
          style="border-top: 1px solid var(--text); margin-bottom: 0px; margin-top:0px;"
        >
        <div
          class="section-2-header uppercase font-medium tracking-tight color-{{ section.settings.color_scheme }}"
          style="font-family: var(--font-heading-family);height: 9.2vh; padding: 0; display: flex; align-items: center; font-size:var(--t-h-4-size); font-weight:var(--t-h-4-weight); line-height:var(--t-h-4-line-height);"
        >
          {{ section.settings.full_text }}
        </div>

        <hr
          class="hrline w-screen max-w-none mx-auto"
          style="border-top: 1px solid var(--text); margin-bottom: 0px; margin-top:0px;"
        >
      </div>

      <div class="maintext flex flex-row" style="margin-top:50px;font-size:2.6vh;">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="arrow-svg12"
          viewBox="0 0 15 15"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
          style="
            fill:var(--text);
                  margin-top:1px;
            height: 23px ;
            width: 30px;
          "
        >
          <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
        </svg>

        <div
          class="blog-article-section color-{{ section.settings.color_scheme }}"
          style="font-family: var(--font-body-family);margin-left: auto; margin-right: auto; font-size:var(--t-b-2-size); font-weight:var(--t-b-2-weight); line-height:var(--t-b-2-line-height);max-width:1000px; width:100%; padding: 0 20px;"
        >
          {{ article.content }}
        </div>
      </div>
    </div>
  {% endif %}
</div>
<hr
  class="hrline w-screen max-w-none mx-auto"
  style="border-top: 1px solid var(--text);margin-bottom:0px; margin-top:30px;margin-left:{{ settings.side_space}}px; margin-right:{{ settings.side_space }}px;"
>
<div
  class="social-section"
  style="font-weight:500; height: 7.8vh; padding-left:{{ settings.side_space}}px; padding-right:{{ settings.side_space }}px;"
>
  <div
    class="social-media items-center "
    style="color: var(--text); padding-top:13px; padding-bottom:20px; font-size:var(--tm-b-2-size);height: 7.8vh;"
  >
    <span class="sharebtn text-xl md:text-2xl items-center;" style="margin-right:20px; margin-top:0.7vw">SHARE</span>

    {% if settings.social_facebook_link != blank %}
      <a
        href="https://www.facebook.com/sharer/sharer.php?u={{ shop.url }}{{ article.url | url_encode }}"
        target="_blank"
        rel="noopener"
        aria-label="Share on Facebook"
        class="fb text-xl md:text-2xl"
        style="margin-right:40px;"
      >
        FACEBOOK
      </a>
    {% endif %}

    {% if settings.social_twitter_link != blank %}
      <a
        href="https://twitter.com/intent/tweet?url={{ shop.url }}{{ article.url | url_encode }}&text={{ article.title | url_encode }}"
        target="_blank"
        rel="noopener"
        aria-label="Share on Twitter"
        class="tw text-xl md:text-2xl"
        style="margin-right:40px;"
      >
        TWITTER
      </a>
    {% endif %}

    {% if settings.social_email_link != blank %}
      <a
        href="mailto:?subject={{ article.title | url_encode }}&body=Check out this article: {{ shop.url }}{{ article.url | url_encode }}"
        class="em text-xl md:text-2xl"
        aria-label="Share via Email"
        style="margin-right:40px;"
      >
        EMAIL
      </a>
    {% endif %}

    {% if settings.social_linkedin_link != blank %}
      <a
        href="https://www.linkedin.com/sharing/share-offsite/?url={{ shop.url }}{{ article.url | url_encode }}"
        target="_blank"
        rel="noopener"
        aria-label="Share on LinkedIn"
        class="linked text-xl md:text-2xl"
        style="margin-right:40px;"
      >
        LINKEDIN
      </a>
    {% endif %}
  </div>
</div>
<hr
  class="hrline1 w-screen max-w-none mx-auto"
  style="border-top: 1px solid var(--text);margin:0px;margin-left:{{ settings.side_space}}px; margin-right:{{ settings.side_space }}px;"
>
<div
  class="colordiv color-{{ section.settings.color_scheme }} related-articles-animated"
  style="padding-left:{{ settings.side_space}}px; padding-right:{{ settings.side_space }}px; padding-bottom: {{ section.settings.related_padding_mobile | default: 20 }}px;"
>
  <div class="w-full uppercase">
    <div class="mainhead flex flex-col md:flex-row md:items-start" style="margin-top:6.9vh;">
      <div style="width:26vw; margin-right:0.65vw;">
        <h1
          class="blog_heading-highlight"
          style="font-family: var(--font-heading-family); font-size:var(--t-h-3-size); font-weight:var(--t-h-3-weight); line-height:var(--t-h-3-line-height); margin-bottom:20px;"
        >
          {{ section.settings.main_heading }}
        </h1>
      </div>
      <div class="blog-grid w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10">
        {% assign default_blog_handle = 'news' %}
        {% assign blog_handle = section.settings.selected_blog | default: default_blog_handle %}
        {% assign blog = blogs[blog_handle] %}
        {% assign articles_limit = section.settings.articles_per_page %}

        {% for article in blog.articles limit: articles_limit %}
          <a
            href="{{ article.url }}"
            class="blog-article block space-y-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg"
          >
            <div class="zoom-trigger">
              <div class="aspect-[5/3] overflow-hidden">
                {% if article.image != blank %}
                  <img
                    srcset="
                      {%- if article.image.width >= 375 -%}{{ article.image | image_url: width: 375 }} 375w,{%- endif -%}
                      {%- if article.image.width >= 600 -%}{{ article.image | image_url: width: 600 }} 600w,{%- endif -%}
                      {%- if article.image.width >= 900 -%}{{ article.image | image_url: width: 900 }} 900w,{%- endif -%}
                      {%- if article.image.width >= 1200 -%}{{ article.image | image_url: width: 1200 }} 1200w,{%- endif -%}
                      {{ article.image | image_url }} {{ article.image.width }}w
                    "
                    sizes="(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw"
                    src="{{ article.image | image_url: width: 600 }}"
                    width="{{ article.image.width }}"
                    height="{{ article.image.height }}"
                    alt="{{ article.title | default: 'Blog image' | escape }}"
                    loading="lazy"
                    class="w-full h-full object-cover transition-transform duration-300 ease-in-out"
                    style="transform-origin: center center;"
                  >
                {% else %}
                  {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray' }}
                {% endif %}
              </div>
              <div>
                <p
                  class="text-[20px] mt-5 text-article-date-color"
                  style="font-family: var(--font-body-family);margin-bottom:2.7vh;margin-top:2.7vh; font-size:var(--t-b-2-size); font-weight:var(--t-b-2-weight); line-height:var(--t-b-2-line-height);"
                >
                  {{ article.published_at | date: '%m.%d.%y' }}
                </p>
                <div
                  class="subclass-header"
                  id="article-title-{{ forloop.index0 }}"
                  style="font-family: var(--font-heading-family);font-size:var(--t-h-4-size); font-weight:var(--t-h-4-weight); line-height:var(--t-h-4-line-height);"
                >
                  <svg
                    class=" arrow-svgsubw-8 object-contain inline-block"
                    style="height:22px; margin-top:-8px; margin-right:-4px;"
                    viewBox="5.5 2 8.5 13"
                    fill="var(--text)"
                    xmlns="http://www.w3.org/2000/svg"
                    stroke="var(--text)"
                    aria-hidden="true"
                  >
                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                  </svg>
                  {{ article.title }}
                </div>
                <span
                  class="subclass-subheader text-[20px] tracking-tight"
                  style="font-family: var(--font-body-family);font-size:var(--t-b-2-size); font-weight:var(--t-b-2-weight); line-height:var(--t-b-2-line-height);"
                >
                  {{ article.content | strip_html | truncate: 50, '' }}
                </span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
<script>
  // Main Article Fade-Up Animation
  document.addEventListener('DOMContentLoaded', function () {
    const animatedElements = document.querySelectorAll('.article-content-animated, .related-articles-animated');

    // Set initial state for all elements
    animatedElements.forEach((element, index) => {
      element.style.transitionDelay = `${index * 0.2}s`;
    });

    // Create intersection observer
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            // Trigger fade-up animation by adding animate class
            entry.target.classList.add('animate');

            // Stop observing this element
            observer.unobserve(entry.target);
          }
        });
      },
      {
        rootMargin: '0px 0px -100px 0px',
        threshold: 0.1,
      }
    );

    // Observe all animated elements
    animatedElements.forEach((element) => {
      observer.observe(element);
    });
  });
</script>

<script type="application/ld+json">
  {{ article | structured_data }}
</script>

{% schema %}
{
  "name": "Blog Article",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_blog_section",
      "label": "Show Blog Section",
      "default": true
    },
    {
      "type": "text",
      "id": "full_text",
      "label": "Full Heading Text",
      "default": "[YOUR_BRAND_CONTENT_TITLE]"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "checkbox",
      "id": "show_date",
      "label": "Show Article Date",
      "default": true
    },
    {
      "type": "text",
      "id": "main_heading",
      "label": "Main Heading",
      "default": "Related Articles"
    },
    {
      "type": "range",
      "id": "related_padding_mobile",
      "label": "Bottom Padding (Mobile)",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 20
    },
    {
      "type": "range",
      "id": "related_padding_desktop",
      "label": "Bottom Padding (Desktop)",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 50
    },
    {
      "type": "blog",
      "id": "selected_blog",
      "label": "Select Blog for Related Articles",
      "info": "Choose which blog to display related articles from"
    },
    {
      "type": "range",
      "id": "articles_per_page",
      "label": "Number of Related Articles",
      "min": 3,
      "max": 9,
      "step": 3,
      "default": 3,
      "info": "How many related articles to display"
    }
  ]
}
{% endschema %}
