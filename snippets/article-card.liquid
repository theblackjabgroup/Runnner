<link rel="stylesheet" href="{{ 'section-main-blog.css' | asset_url }}">

<div class="blog-grid w-full" id="blog-posts-container">
  {% assign default_blog_handle = 'news' %}
  {% assign blog_handle = section.settings.selected_blog | default: default_blog_handle %}
  {% assign blog = blogs[blog_handle] %}
  {% assign articles_limit = section.settings.articles_per_page %}
  {% comment %} {% assign articles_count = blog.articles.size %} {% endcomment %}

  {% for article in blog.articles %}
    {% if forloop.index <= articles_limit %}
      {% assign article_class = 'blog-article block space-y-2 px-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg' %}
    {% else %}
      {% assign article_class = 'blog-article hidden-articles block space-y-2 px-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg' %}
    {% endif %}

    <a href="{{ article.url }}" class="{{ article_class }} blog-article-card">
      <div class="zoom-trigger">
        <div class="aspect-[5/3] overflow-hidden">
          {% if article.image != blank %}
            <img
              srcset="
                {%- if article.image.width >= 375 -%}{{ article.image | image_url: width: 375 }} 375w,{%- endif -%}
                {%- if article.image.width >= 600 -%}{{ article.image | image_url: width: 600 }} 600w,{%- endif -%}
                {%- if article.image.width >= 900 -%}{{ article.image | image_url: width: 900 }} 900w,{%- endif -%}
                {%- if article.image.width >= 1200 -%}{{ article.image | image_url: width: 1200 }} 1200w,{%- endif -%}
                {{ article.image | image_url }} {{ article.image.width }}w
              "
              sizes="(max-width: 768px) 100vw, 25vw"
              src="{{ article.image | image_url: width: 600 }}"
              alt="{{ article.title | default: 'Blog image' | escape }}"
              width="{{ article.image.width }}"
              height="{{ article.image.height }}"
              loading="lazy"
              class="img1 object-cover transition-transform duration-300 ease-in-out article-image"
            >
          {% else %}
            {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray' }}
          {% endif %}
        </div>
        <div>
          <p class="text-article-date-color article-date-text">
            {{ article.published_at | date: '%m.%d.%y' }}
          </p>
          <div
            class="subclass-header article-title-text"
            id="article-title-{{ forloop.index0 }}"
          >
            <svg
              class="w-8 object-contain inline-block article-arrow-icon"
              viewBox="5.5 2 8.5 13"
              fill="currentColor"
              xmlns="http://www.w3.org/2000/svg"
              stroke="currentColor"
              aria-hidden="true"
            >
              <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
            </svg>
            {{ article.title }}
          </div>
          <span class="subclass-subheader font-medium tracking-tight article-content-text">
            {{ article.content | strip_html | truncate: 50, '' }}
          </span>
        </div>
      </div>
    </a>
  {% endfor %}
</div>
