<link rel="stylesheet" href="{{ 'section-main-blog.css' | asset_url }}">

<div class="blog-grid w-full" id="blog-posts-container">
  {% assign default_blog_handle = 'news' %}
  {% assign blog_handle = section.settings.selected_blog | default: default_blog_handle %}
  {% assign blog = blogs[blog_handle] %}
  {% assign articles_limit = section.settings.articles_per_page %}
  {% comment %} {% assign articles_count = blog.articles.size %} {% endcomment %}

  {% for article in blog.articles %}
    {% if forloop.index <= articles_limit %}
      {% assign article_class = 'blog-article block space-y-2 px-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg' %}
    {% else %}
      {% assign article_class = 'blog-article hidden-articles block space-y-2 px-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 transition-shadow hover:shadow-lg' %}
    {% endif %}

    <a href="{{ article.url }}" class="{{ article_class }} blog-article-card">
      <div class="zoom-trigger">
        <div class="aspect-[5/3] overflow-hidden">
          {% if article.image != blank %}
            <img
              srcset="
                {%- if article.image.width >= 375 -%}{{ article.image | image_url: width: 375 }} 375w,{%- endif -%}
                {%- if article.image.width >= 600 -%}{{ article.image | image_url: width: 600 }} 600w,{%- endif -%}
                {%- if article.image.width >= 900 -%}{{ article.image | image_url: width: 900 }} 900w,{%- endif -%}
                {%- if article.image.width >= 1200 -%}{{ article.image | image_url: width: 1200 }} 1200w,{%- endif -%}
                {{ article.image | image_url }} {{ article.image.width }}w
              "
              sizes="(max-width: 768px) 100vw, 25vw"
              src="{{ article.image | image_url: width: 600 }}"
              alt="{{ article.title | default: 'Blog image' | escape }}"
              width="{{ article.image.width }}"
              height="{{ article.image.height }}"
              loading="lazy"
              class="img1 object-cover transition-transform duration-300 ease-in-out"
              style="width: 24.9vw; height: auto; max-height: 49.5vh; transform-origin: center center;"
            >
          {% else %}
            {{ 'collection-1' | placeholder_svg_tag: 'w-full h-full bg-gray' }}
          {% endif %}
        </div>
        <div>
          <p
            class="text-article-date-color"
            style="font-family: var(--font-body-family);margin-bottom:2.7vh; margin-top:2.7vh; font-size:var(--t-b-2-size); font-weight:var(--t-b-2-weight); line-height:var(--t-b-2-line-height);"
          >
            {{ article.published_at | date: '%m.%d.%y' }}
          </p>
          <div
            class="subclass-header"
            id="article-title-{{ forloop.index0 }}"
            style="font-family: var(--font-heading-family);font-size:var(--t-h-4-size); font-weight:var(--t-h-4-weight); line-height:var(--t-h-4-line-height);"
          >
            {% render 'icon-playback',
              width: '22',
              height: '22',
              fill: 'var(--text)',
              stroke: 'var(--text)',
              viewBox: '4.5 1.5 8.5 13',
              class: 'w-8 object-contain inline-block',
              style: 'height:22px; margin-top:-8px; margin-right:-4px;'
            %}
            {{ article.title }}
          </div>
          <span
            class="subclass-subheader font-medium tracking-tight"
            style="font-family: var(--font-body-family);font-size:var(--t-b-2-size); font-weight:var(--t-b-2-weight); line-height:var(--t-b-2-line-height);"
          >
            {{ article.content | strip_html | truncate: 50, '' }}
          </span>
        </div>
      </div>
    </a>
  {% endfor %}
</div>
